{"D:\\mspr_ci\\env\\index.js":{"path":"D:\\mspr_ci\\env\\index.js","statementMap":{"0":{"start":{"line":1,"column":13},"end":{"line":1,"column":30}},"1":{"start":{"line":4,"column":16},"end":{"line":4,"column":53}},"2":{"start":{"line":5,"column":16},"end":{"line":7,"column":2}},"3":{"start":{"line":9,"column":0},"end":{"line":11,"column":1}},"4":{"start":{"line":10,"column":4},"end":{"line":10,"column":24}}},"fnMap":{},"branchMap":{"0":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":53}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":36}},{"start":{"line":4,"column":40},"end":{"line":4,"column":53}}],"line":4},"1":{"loc":{"start":{"line":9,"column":0},"end":{"line":11,"column":1}},"type":"if","locations":[{"start":{"line":9,"column":0},"end":{"line":11,"column":1}},{"start":{"line":9,"column":0},"end":{"line":11,"column":1}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0},"f":{},"b":{"0":[1,0],"1":[0,1]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e5837f63a08ea04ea376044bad0e4a8cc3711964"},"D:\\mspr_ci\\spec\\start.ts":{"path":"D:\\mspr_ci\\spec\\start.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":55}},"3":{"start":{"line":5,"column":18},"end":{"line":5,"column":61}},"4":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"5":{"start":{"line":7,"column":16},"end":{"line":7,"column":43}},"6":{"start":{"line":8,"column":0},"end":{"line":15,"column":3}},"7":{"start":{"line":16,"column":0},"end":{"line":23,"column":3}},"8":{"start":{"line":17,"column":4},"end":{"line":22,"column":5}},"9":{"start":{"line":18,"column":8},"end":{"line":18,"column":68}},"10":{"start":{"line":21,"column":8},"end":{"line":21,"column":76}},"11":{"start":{"line":24,"column":0},"end":{"line":38,"column":1}},"12":{"start":{"line":25,"column":21},"end":{"line":25,"column":36}},"13":{"start":{"line":26,"column":4},"end":{"line":34,"column":7}},"14":{"start":{"line":27,"column":8},"end":{"line":33,"column":9}},"15":{"start":{"line":28,"column":12},"end":{"line":28,"column":43}},"16":{"start":{"line":29,"column":12},"end":{"line":29,"column":30}},"17":{"start":{"line":32,"column":12},"end":{"line":32,"column":69}},"18":{"start":{"line":37,"column":4},"end":{"line":37,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":16,"column":19},"end":{"line":16,"column":20}},"loc":{"start":{"line":16,"column":31},"end":{"line":23,"column":1}},"line":16},"1":{"name":"(anonymous_1)","decl":{"start":{"line":26,"column":57},"end":{"line":26,"column":58}},"loc":{"start":{"line":26,"column":68},"end":{"line":34,"column":5}},"line":26}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":4},"end":{"line":22,"column":5}},"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":22,"column":5}},{"start":{"line":17,"column":4},"end":{"line":22,"column":5}}],"line":17},"1":{"loc":{"start":{"line":24,"column":0},"end":{"line":38,"column":1}},"type":"if","locations":[{"start":{"line":24,"column":0},"end":{"line":38,"column":1}},{"start":{"line":24,"column":0},"end":{"line":38,"column":1}}],"line":24},"2":{"loc":{"start":{"line":27,"column":8},"end":{"line":33,"column":9}},"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":33,"column":9}},{"start":{"line":27,"column":8},"end":{"line":33,"column":9}}],"line":27}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1},"f":{"0":1,"1":0},"b":{"0":[1,0],"1":[0,1],"2":[0,0]},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\spec\\start.ts","sources":["D:\\mspr_ci\\spec\\start.ts"],"names":[],"mappings":";;;AAAA,wDAAwB;AACxB,8DAA8B;AAC9B,qCAA2C;AAG3C,MAAM,OAAO,GAAG,IAAI,iBAAO,CAAC,IAAI,CAAC,CAAC;AAGlC,OAAO,CAAC,UAAU,CAAC;IACf,MAAM,EAAE,IAAI;IACZ,QAAQ,EAAE,MAAM;IAChB,UAAU,EAAE;QACR,gBAAgB;KACnB;IACD,4BAA4B,EAAE,KAAK;CACtC,CAAC,CAAC;AAGH,OAAO,CAAC,UAAU,CAAC,CAAC,MAAe,EAAE,EAAE;IACnC,IAAI,MAAM,EAAE;QACR,0BAAgB,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC;KACrD;SAAM;QACH,0BAAgB,CAAC,KAAK,CAAC,iCAAiC,CAAC,CAAC;KAC7D;AACL,CAAC,CAAC,CAAC;AAGH,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;IACjB,MAAM,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IACjC,cAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,UAAU,EAAE,QAAQ,EAAE,CAAC,KAAK,EAAE,EAAE;QACjD,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;YACpB,OAAO,CAAC,SAAS,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/B,OAAO,CAAC,OAAO,EAAE,CAAC;SACrB;aAAM;YACH,0BAAgB,CAAC,KAAK,CAAC,sBAAsB,CAAC,CAAC;SAClD;IACL,CAAC,CAAC,CAAC;CACN;KAAM;IACH,OAAO,CAAC,OAAO,EAAE,CAAC;CACrB","sourcesContent":["import find from 'find';\r\nimport Jasmine from 'jasmine';\r\nimport { globalInfoLogger } from '@shared';\r\n\r\n// Init Jasmine\r\nconst jasmine = new Jasmine(null);\r\n\r\n// Set location of test files\r\njasmine.loadConfig({\r\n    random: true,\r\n    spec_dir: 'spec',\r\n    spec_files: [\r\n        './**/*.spec.ts',\r\n    ],\r\n    stopSpecOnExpectationFailure: false,\r\n});\r\n\r\n// On complete callback function\r\njasmine.onComplete((passed: boolean) => {\r\n    if (passed) {\r\n        globalInfoLogger.info('All tests have passed :)');\r\n    } else {\r\n        globalInfoLogger.error('At least one test has failed :(');\r\n    }\r\n});\r\n\r\n// Run all or a single unit-test\r\nif (process.argv[2]) {\r\n    const testFile = process.argv[2];\r\n    find.file(testFile + '.spec.ts', './spec', (files) => {\r\n        if (files.length === 1) {\r\n            jasmine.specFiles = [files[0]];\r\n            jasmine.execute();\r\n        } else {\r\n            globalInfoLogger.error('Test file not found!');\r\n        }\r\n    });\r\n} else {\r\n    jasmine.execute();\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1c454e1a6085f5fffc7898264ca887128f8faa0e"},"D:\\mspr_ci\\src\\shared\\index.ts":{"path":"D:\\mspr_ci\\src\\shared\\index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":51}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":49}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":53}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\shared\\index.ts","sources":["D:\\mspr_ci\\src\\shared\\index.ts"],"names":[],"mappings":";;;AAAA,mDAAyB;AACzB,iDAAuB;AACvB,qDAA2B","sourcesContent":["export * from './Logger';\r\nexport * from './Misc';\r\nexport * from './Database';\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"79cad7de81abd7aee130dc70c9eee762731c1ecd"},"D:\\mspr_ci\\src\\shared\\Logger.ts":{"path":"D:\\mspr_ci\\src\\shared\\Logger.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":17},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":18},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":0},"end":{"line":38,"column":3}},"4":{"start":{"line":39,"column":0},"end":{"line":39,"column":48}},"5":{"start":{"line":40,"column":25},"end":{"line":40,"column":58}},"6":{"start":{"line":41,"column":0},"end":{"line":46,"column":2}},"7":{"start":{"line":42,"column":4},"end":{"line":45,"column":7}},"8":{"start":{"line":43,"column":8},"end":{"line":43,"column":53}},"9":{"start":{"line":44,"column":8},"end":{"line":44,"column":60}},"10":{"start":{"line":47,"column":18},"end":{"line":47,"column":44}},"11":{"start":{"line":48,"column":0},"end":{"line":51,"column":3}},"12":{"start":{"line":48,"column":62},"end":{"line":51,"column":2}},"13":{"start":{"line":49,"column":4},"end":{"line":49,"column":42}},"14":{"start":{"line":50,"column":4},"end":{"line":50,"column":49}},"15":{"start":{"line":52,"column":22},"end":{"line":52,"column":52}},"16":{"start":{"line":53,"column":0},"end":{"line":56,"column":3}},"17":{"start":{"line":53,"column":66},"end":{"line":56,"column":2}},"18":{"start":{"line":54,"column":4},"end":{"line":54,"column":46}},"19":{"start":{"line":55,"column":4},"end":{"line":55,"column":53}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":41,"column":54},"end":{"line":41,"column":55}},"loc":{"start":{"line":41,"column":69},"end":{"line":46,"column":1}},"line":41},"1":{"name":"(anonymous_1)","decl":{"start":{"line":42,"column":34},"end":{"line":42,"column":35}},"loc":{"start":{"line":42,"column":44},"end":{"line":45,"column":5}},"line":42},"2":{"name":"(anonymous_2)","decl":{"start":{"line":48,"column":47},"end":{"line":48,"column":48}},"loc":{"start":{"line":48,"column":62},"end":{"line":51,"column":2}},"line":48},"3":{"name":"(anonymous_3)","decl":{"start":{"line":48,"column":85},"end":{"line":48,"column":86}},"loc":{"start":{"line":48,"column":95},"end":{"line":51,"column":1}},"line":48},"4":{"name":"(anonymous_4)","decl":{"start":{"line":53,"column":51},"end":{"line":53,"column":52}},"loc":{"start":{"line":53,"column":66},"end":{"line":56,"column":2}},"line":53},"5":{"name":"(anonymous_5)","decl":{"start":{"line":53,"column":89},"end":{"line":53,"column":90}},"loc":{"start":{"line":53,"column":99},"end":{"line":56,"column":1}},"line":53}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":4,"8":11,"9":11,"10":1,"11":1,"12":4,"13":2,"14":2,"15":1,"16":1,"17":4,"18":7,"19":7},"f":{"0":4,"1":11,"2":4,"3":2,"4":4,"5":7},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\shared\\Logger.ts","sources":["D:\\mspr_ci\\src\\shared\\Logger.ts"],"names":[],"mappings":";;AAAA,mCAA8C;AAC9C,qCAAqC;AACrC,kBAAS,CAAC;IACN,SAAS,EAAE;QACP,WAAW,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE;QAChC,IAAI,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE;QACzB,MAAM,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE;QAC3B,QAAQ,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE;KAChC;IACD,UAAU,EAAE;QACR,WAAW,EAAE;YACT,SAAS,EAAE;gBACP,aAAa;aAChB;YACD,KAAK,EAAE,MAAM;SAChB;QACD,IAAI,EAAE;YACF,SAAS,EAAE;gBACP,MAAM;aACT;YACD,KAAK,EAAE,MAAM;SAChB;QACD,OAAO,EAAE;YACL,SAAS,EAAE;gBACP,QAAQ;aACX;YACD,KAAK,EAAE,MAAM;SAChB;QACD,QAAQ,EAAE;YACN,SAAS,EAAE;gBACP,MAAM;aACT;YACD,KAAK,EAAE,MAAM;SAChB;KACJ;CACJ,CAAC,CAAC;AAEU,QAAA,gBAAgB,GAAG,kBAAS,EAAE,CAAC;AAE5C,MAAM,gBAAgB,GAAG,kBAAS,CAAC,aAAa,CAAC,CAAC;AAQrC,QAAA,2CAA2C,GAAG,CAAC,SAAiB,EAAE,EAAE;IAC7E,OAAO,sBAAY,CAAC,CAAC,IAAI,EAAE,EAAE;QACzB,gBAAgB,CAAC,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC,CAAC;QAC7C,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC;IACxD,CAAC,CAAC,CAAC;AACP,CAAC,CAAC;AAEF,MAAM,SAAS,GAAG,kBAAS,CAAC,MAAM,CAAC,CAAC;AAQvB,QAAA,oCAAoC,GAAG,CAAC,SAAiB,EAAE,EAAE,CAAC,sBAAY,CAAC,CAAC,IAAI,EAAE,EAAE;IAC7F,SAAS,CAAC,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC,CAAC;IACtC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC;AACjD,CAAC,CAAC,CAAC;AAEH,MAAM,aAAa,GAAG,kBAAS,CAAC,UAAU,CAAC,CAAC;AAQ/B,QAAA,wCAAwC,GAAG,CAAC,SAAiB,EAAE,EAAE,CAAC,sBAAY,CAAC,CAAC,IAAI,EAAE,EAAE;IACjG,aAAa,CAAC,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC,CAAC;IAC1C,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,SAAS,CAAC,CAAC;AACrD,CAAC,CAAC,CAAC","sourcesContent":["import { configure, getLogger } from 'log4js';\r\nimport {beforeMethod} from 'kaop-ts';\r\nconfigure({\r\n    appenders: {\r\n        controllers: { type: 'console' },\r\n        daos: { type: 'console' },\r\n        global: { type: 'console' },\r\n        services: { type: 'console' },\r\n    },\r\n    categories: {\r\n        controllers: {\r\n            appenders: [\r\n                'controllers',\r\n            ],\r\n            level: 'info',\r\n        },\r\n        daos: {\r\n            appenders: [\r\n                'daos',\r\n            ],\r\n            level: 'info',\r\n        },\r\n        default: {\r\n            appenders: [\r\n                'global',\r\n            ],\r\n            level: 'info',\r\n        },\r\n        services: {\r\n            appenders: [\r\n                'daos',\r\n            ],\r\n            level: 'info',\r\n        },\r\n    },\r\n});\r\n\r\nexport const globalInfoLogger = getLogger();\r\n\r\nconst controllerLogger = getLogger('controllers');\r\n/**\r\n * Log with level info different informations about the called controller\r\n * @function\r\n * @name NameCallerArgsReturnLogControllersInfoLevel\r\n * @param className\r\n * @version 1.0.0\r\n */\r\nexport const NameCallerArgsReturnLogControllersInfoLevel = (className: string) => {\r\n    return beforeMethod((meta) => {\r\n        controllerLogger.info('Inside ' + className);\r\n        controllerLogger.info(meta.method.name + ' called');\r\n    });\r\n};\r\n\r\nconst daoLogger = getLogger('daos');\r\n/**\r\n * Log with level info different informations about the called dao\r\n * @function\r\n * @name NameCallerArgsReturnLogDaosInfoLevel\r\n * @param className\r\n * @version 1.0.0\r\n */\r\nexport const NameCallerArgsReturnLogDaosInfoLevel = (className: string) => beforeMethod((meta) => {\r\n    daoLogger.info('Inside ' + className);\r\n    daoLogger.info(meta.method.name + ' called');\r\n});\r\n\r\nconst serviceLogger = getLogger('services');\r\n/**\r\n * Log with level info different informations about the called service\r\n * @function\r\n * @name NameCallerArgsReturnLogServicesInfoLevel\r\n * @param className\r\n * @version 1.0.0\r\n */\r\nexport const NameCallerArgsReturnLogServicesInfoLevel = (className: string) => beforeMethod((meta) => {\r\n    serviceLogger.info('Inside ' + className);\r\n    serviceLogger.info(meta.method.name + ' called');\r\n});\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"09291d02e38149d5e988bb5455fcb924fad9d7cc"},"D:\\mspr_ci\\src\\shared\\Misc.ts":{"path":"D:\\mspr_ci\\src\\shared\\Misc.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":17},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":0},"end":{"line":8,"column":2}},"3":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"4":{"start":{"line":6,"column":8},"end":{"line":6,"column":45}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":15},"end":{"line":4,"column":16}},"loc":{"start":{"line":4,"column":24},"end":{"line":8,"column":1}},"line":4}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5}},"s":{"0":1,"1":1,"2":1,"3":13,"4":0},"f":{"0":13},"b":{"0":[0,13]},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\shared\\Misc.ts","sources":["D:\\mspr_ci\\src\\shared\\Misc.ts"],"names":[],"mappings":";;AAAA,qCAA4C;AAE/B,QAAA,IAAI,GAAG,CAAC,GAAU,EAAE,EAAE;IAC/B,IAAI,GAAG,EAAE;QACL,yBAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;KAC/B;AACL,CAAC,CAAC","sourcesContent":["import { globalInfoLogger } from './Logger';\r\n\r\nexport const pErr = (err: Error) => {\r\n    if (err) {\r\n        globalInfoLogger.error(err);\r\n    }\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b93d44e163b0d0671f027cb20ac46265b74264bb"},"D:\\mspr_ci\\src\\shared\\Database.ts":{"path":"D:\\mspr_ci\\src\\shared\\Database.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":31},"end":{"line":3,"column":62}},"2":{"start":{"line":4,"column":20},"end":{"line":4,"column":40}},"3":{"start":{"line":7,"column":8},"end":{"line":16,"column":11}},"4":{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},"5":{"start":{"line":20,"column":12},"end":{"line":20,"column":39}},"6":{"start":{"line":22,"column":8},"end":{"line":22,"column":39}},"7":{"start":{"line":25,"column":0},"end":{"line":25,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":18},"end":{"line":17,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":25},"end":{"line":23,"column":5}},"line":18}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":71},"end":{"line":7,"column":96}},"type":"binary-expr","locations":[{"start":{"line":7,"column":71},"end":{"line":7,"column":90}},{"start":{"line":7,"column":94},"end":{"line":7,"column":96}}],"line":7},"1":{"loc":{"start":{"line":7,"column":98},"end":{"line":7,"column":127}},"type":"binary-expr","locations":[{"start":{"line":7,"column":98},"end":{"line":7,"column":121}},{"start":{"line":7,"column":125},"end":{"line":7,"column":127}}],"line":7},"2":{"loc":{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},"type":"if","locations":[{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},{"start":{"line":19,"column":8},"end":{"line":21,"column":9}}],"line":19}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":1},"f":{"0":0,"1":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0]},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\shared\\Database.ts","sources":["D:\\mspr_ci\\src\\shared\\Database.ts"],"names":[],"mappings":";;AAAA,+DAA+C;AAC/C,yCAAkD;AAElD,MAAa,mBAAmB;IAIpB,MAAM,CAAC,IAAI;QACf,mBAAmB,CAAC,GAAG,GAAG,IAAI,gCAAS,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,IAAI,EAAE,EAAE,OAAO,CAAC,GAAG,CAAC,WAAW,IAAI,EAAE,EAC5F,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE;YACrB,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,OAAO;YACzB,IAAI,EAAE,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC;YACjC,OAAO,EAAE,UAAU;YACnB,cAAc,EAAE,IAAI;YACpB,MAAM,EAAE;gBACJ,MAAM,EAAE,OAAO,CAAC,GAAG,CAAC,WAAW;aAClC;YACD,MAAM,EAAE,CAAC,gBAAI,EAAE,oBAAQ,EAAE,mBAAO,CAAC;SACpC,CAAC,CAAC;IACX,CAAC;IAEM,MAAM,CAAC,WAAW;QACrB,IAAI,CAAC,mBAAmB,CAAC,GAAG,EAAE;YAC1B,mBAAmB,CAAC,IAAI,EAAE,CAAC;SAC9B;QAED,OAAO,mBAAmB,CAAC,GAAG,CAAC;IACnC,CAAC;CACJ;AAzBD,kDAyBC","sourcesContent":["import {Sequelize} from 'sequelize-typescript';\r\nimport {Product, Purchase, User} from '@entities';\r\n\r\nexport class SequelizeConnection {\r\n\r\n    private static con: Sequelize;\r\n\r\n    private static init(): void {\r\n        SequelizeConnection.con = new Sequelize(process.env.DB_NAME || '', process.env.DB_USERNAME || '',\r\n            process.env.DB_PASSWORD, {\r\n                host: process.env.DB_HOST,\r\n                port: Number(process.env.DB_PORT),\r\n                dialect: 'postgres',\r\n                repositoryMode: true,\r\n                define: {\r\n                    schema: process.env.SCHEMA_NAME,\r\n                },\r\n                models: [User, Purchase, Product],\r\n            });\r\n    }\r\n\r\n    public static getInstance(): Sequelize {\r\n        if (!SequelizeConnection.con) {\r\n            SequelizeConnection.init();\r\n        }\r\n\r\n        return SequelizeConnection.con;\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"bba85c7fd4e887cda54cabef1ebb33ef2bf273ee"},"D:\\mspr_ci\\src\\entities\\index.ts":{"path":"D:\\mspr_ci\\src\\entities\\index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":56}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":60}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":64}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":60}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":59}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":65}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\entities\\index.ts","sources":["D:\\mspr_ci\\src\\entities\\index.ts"],"names":[],"mappings":";;;AAAA,wDAA8B;AAC9B,4DAAkC;AAClC,gEAAsC;AACtC,4DAAkC;AAClC,2DAAiC;AACjC,iEAAuC","sourcesContent":["export * from './user.entity';\r\nexport * from './user.dto.entity';\r\nexport * from './purchase.dto.entity';\r\nexport * from './purchase.entity';\r\nexport * from './product.entity';\r\nexport * from './total-revenue.entity';\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"dc09b2fb677436d2a60bad63ad058ccb5ce5a0c4"},"D:\\mspr_ci\\src\\entities\\user.entity.ts":{"path":"D:\\mspr_ci\\src\\entities\\user.entity.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":31},"end":{"line":4,"column":62}},"3":{"start":{"line":5,"column":20},"end":{"line":5,"column":40}},"4":{"start":{"line":6,"column":29},"end":{"line":6,"column":58}},"5":{"start":{"line":7,"column":26},"end":{"line":7,"column":52}},"6":{"start":{"line":8,"column":26},"end":{"line":8,"column":54}},"7":{"start":{"line":9,"column":12},"end":{"line":9,"column":13}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":10}},"9":{"start":{"line":11,"column":14},"end":{"line":11,"column":15}},"10":{"start":{"line":12,"column":11},"end":{"line":13,"column":1}},"11":{"start":{"line":14,"column":0},"end":{"line":25,"column":33}},"12":{"start":{"line":26,"column":0},"end":{"line":35,"column":40}},"13":{"start":{"line":36,"column":0},"end":{"line":45,"column":39}},"14":{"start":{"line":46,"column":0},"end":{"line":49,"column":40}},"15":{"start":{"line":47,"column":41},"end":{"line":47,"column":67}},"16":{"start":{"line":50,"column":0},"end":{"line":57,"column":9}},"17":{"start":{"line":58,"column":0},"end":{"line":58,"column":20}},"18":{"start":{"line":59,"column":0},"end":{"line":59,"column":12}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":47,"column":35},"end":{"line":47,"column":36}},"loc":{"start":{"line":47,"column":41},"end":{"line":47,"column":67}},"line":47}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":0,"16":1,"17":1,"18":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\entities\\user.entity.ts","sources":["D:\\mspr_ci\\src\\entities\\user.entity.ts"],"names":[],"mappings":";;;AACA,+DAO8B;AAC9B,yCAAoC;AACpC,2DAA8D;AAC9D,qDAAqC;AACrC,uDAAsD;AAEtD,IAAI,KAAK,GAAG,CAAC,CAAC;AAMd,KAAK,GAAG,CAAC,CAAC;AAQV,IAAI,OAAO,GAAG,CAAC,CAAC;AAehB,IAAa,IAAI,GAAjB,MAAa,IAAK,SAAQ,4BAAW;CAyDpC,CAAA;AAxCG;IAfC,qCAAgB,CAAC;QACd,WAAW,EAAE,cAAc;QAC3B,QAAQ,EAAE,IAAI;QACd,IAAI,EAAE,UAAU;QAChB,OAAO,EAAE,CAAC,sCAAsC,CAAC;KACpD,CAAC;IACD,iCAAU;IACV,8BAAO,CAAC,qBAAS,CAAC,MAAM,CAAC;IACzB,6BAAM,CAAC,qBAAS,CAAC,IAAI,CAAC;;gCAOF;AAerB;IAbC,qCAAgB,CAAC;QACd,WAAW,EAAE,uBAAuB;QACpC,QAAQ,EAAE,IAAI;QACd,OAAO,EAAE,CAAC,OAAO,EAAE,QAAQ,EAAE,OAAO,EAAE,MAAM,CAAC;KAChD,CAAC;IACD,gCAAS,CAAC,KAAK,CAAC;IAChB,6BAAM,CAAC,qBAAS,CAAC,MAAM,CAAC;;uCAOC;AAe1B;IAbC,qCAAgB,CAAC;QACd,WAAW,EAAE,sBAAsB;QACnC,QAAQ,EAAE,IAAI;QACd,OAAO,EAAE,CAAC,SAAS,EAAE,OAAO,EAAE,uBAAuB,EAAE,QAAQ,CAAC;KACnE,CAAC;IACD,gCAAS,CAAC,KAAK,CAAC;IAChB,6BAAM,CAAC,qBAAS,CAAC,MAAM,CAAC;;sCAOA;AASzB;IADC,8BAAO,CAAC,GAAG,EAAE,CAAC,0BAAQ,EAAE,QAAQ,CAAC;;uCACH;AAxDtB,IAAI;IAdhB,6BAAQ,CAAC;QACN,WAAW,EAAE,YAAY;QACzB,IAAI,EAAE,MAAM;KACf,CAAC;IACD,sBAAI,CAAC,MAAM,CAAC;IACZ,4BAAK,CAAC,EAAC,SAAS,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAC,CAAC;GAS/B,IAAI,CAyDhB;AAzDY,oBAAI;AA0DjB,OAAO,GAAG,CAAC,CAAC","sourcesContent":["import {v4String} from 'uuid/interfaces';\r\nimport {\r\n    Table,\r\n    Column,\r\n    Model,\r\n    PrimaryKey,\r\n    Default,\r\n    AllowNull, HasMany,\r\n} from 'sequelize-typescript';\r\nimport {DataTypes} from 'sequelize';\r\nimport {ApiModel, ApiModelProperty} from 'swagger-express-ts';\r\nimport {Path} from 'typescript-rest';\r\nimport {IPurchase, Purchase} from './purchase.entity';\r\n\r\nlet IUser = 1;\r\n/**\r\n * Interface for classes that represent an user\r\n *\r\n * @interface\r\n */\r\nIUser = 1;\r\nexport interface IUser {\r\n    id: v4String;\r\n    firstName: string;\r\n    lastName: string;\r\n    purchases: IPurchase[];\r\n}\r\n\r\nlet UserDoc = 1;\r\n@ApiModel({\r\n    description: 'User Model',\r\n    name: 'User',\r\n})\r\n@Path('User')\r\n@Table({tableName: 'users', paranoid: true})\r\n/**\r\n * Creates a new User\r\n * @classdesc Database users\r\n * @class\r\n * @public\r\n * @implements {IUser}\r\n * @hideconstructor\r\n */\r\nexport class User extends Model<User> implements IUser {\r\n\r\n    @ApiModelProperty({\r\n        description: 'Id of a User',\r\n        required: true,\r\n        type: 'v4String',\r\n        example: ['75442486-0878-440c-9db1-a7006c25a39f'],\r\n    })\r\n    @PrimaryKey\r\n    @Default(DataTypes.UUIDV4)\r\n    @Column(DataTypes.UUID)\r\n    /**\r\n     * Id of the user\r\n     * @member User#id\r\n     * @public\r\n     * @type {v4String}\r\n     */\r\n    public id!: v4String;\r\n\r\n    @ApiModelProperty({\r\n        description: 'Firstname of the user',\r\n        required: true,\r\n        example: ['Ronan', 'Alexis', 'Louka', 'Rémi'],\r\n    })\r\n    @AllowNull(false)\r\n    @Column(DataTypes.STRING)\r\n    /**\r\n     * FirstName of the user\r\n     * @member User#firstName\r\n     * @public\r\n     * @type {string}\r\n     */\r\n    public firstName!: string;\r\n\r\n    @ApiModelProperty({\r\n        description: 'Lastname of the user',\r\n        required: true,\r\n        example: ['Laplaud', 'Leroy', 'Houlgatte--Bustamante', 'Castel'],\r\n    })\r\n    @AllowNull(false)\r\n    @Column(DataTypes.STRING)\r\n    /**\r\n     * LastName of the user\r\n     * @member User#lastName\r\n     * @public\r\n     * @type {string}\r\n     */\r\n    public lastName!: string;\r\n\r\n    /**\r\n     * Purchases of the user\r\n     * @member User#purchases\r\n     * @public\r\n     * @type {IPurchase[]}\r\n     */\r\n    @HasMany(() => Purchase, 'userId')\r\n    public purchases!: IPurchase[];\r\n}\r\nUserDoc = 1;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"88f1ef4d8a48e15e2f52b1970c8f79e5661ae5f8"},"D:\\mspr_ci\\src\\entities\\purchase.entity.ts":{"path":"D:\\mspr_ci\\src\\entities\\purchase.entity.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":31},"end":{"line":4,"column":62}},"3":{"start":{"line":5,"column":20},"end":{"line":5,"column":40}},"4":{"start":{"line":6,"column":22},"end":{"line":6,"column":46}},"5":{"start":{"line":7,"column":29},"end":{"line":7,"column":58}},"6":{"start":{"line":8,"column":26},"end":{"line":8,"column":52}},"7":{"start":{"line":9,"column":25},"end":{"line":9,"column":52}},"8":{"start":{"line":10,"column":16},"end":{"line":10,"column":17}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":14}},"10":{"start":{"line":12,"column":15},"end":{"line":13,"column":1}},"11":{"start":{"line":14,"column":0},"end":{"line":25,"column":41}},"12":{"start":{"line":22,"column":44},"end":{"line":22,"column":62}},"13":{"start":{"line":26,"column":0},"end":{"line":29,"column":39}},"14":{"start":{"line":27,"column":43},"end":{"line":27,"column":61}},"15":{"start":{"line":30,"column":0},"end":{"line":41,"column":44}},"16":{"start":{"line":38,"column":44},"end":{"line":38,"column":68}},"17":{"start":{"line":42,"column":0},"end":{"line":45,"column":42}},"18":{"start":{"line":43,"column":43},"end":{"line":43,"column":67}},"19":{"start":{"line":46,"column":0},"end":{"line":53,"column":13}},"20":{"start":{"line":54,"column":0},"end":{"line":54,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":22,"column":38},"end":{"line":22,"column":39}},"loc":{"start":{"line":22,"column":44},"end":{"line":22,"column":62}},"line":22},"1":{"name":"(anonymous_1)","decl":{"start":{"line":27,"column":37},"end":{"line":27,"column":38}},"loc":{"start":{"line":27,"column":43},"end":{"line":27,"column":61}},"line":27},"2":{"name":"(anonymous_2)","decl":{"start":{"line":38,"column":38},"end":{"line":38,"column":39}},"loc":{"start":{"line":38,"column":44},"end":{"line":38,"column":68}},"line":38},"3":{"name":"(anonymous_3)","decl":{"start":{"line":43,"column":37},"end":{"line":43,"column":38}},"loc":{"start":{"line":43,"column":43},"end":{"line":43,"column":67}},"line":43}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":1,"14":0,"15":1,"16":0,"17":1,"18":0,"19":1,"20":1},"f":{"0":0,"1":0,"2":0,"3":0},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\entities\\purchase.entity.ts","sources":["D:\\mspr_ci\\src\\entities\\purchase.entity.ts"],"names":[],"mappings":";;;AAAA,+DAO8B;AAC9B,yCAAoC;AAEpC,+CAA0C;AAC1C,2DAA8D;AAC9D,qDAAqC;AACrC,qDAAmD;AAEnD,IAAI,SAAS,GAAG,CAAC,CAAC;AAYlB,SAAS,GAAG,CAAC,CAAC;AAgBd,IAAa,QAAQ,GAArB,MAAa,QAAS,SAAQ,4BAAe;CA6B5C,CAAA;AAlBG;IATC,qCAAgB,CAAC;QACd,WAAW,EAAE,gBAAgB;QAC7B,IAAI,EAAE,UAAU;QAChB,QAAQ,EAAE,IAAI;QACd,OAAO,EAAE,CAAC,sCAAsC,CAAC;KACpD,CAAC;IACD,iCAAU;IACV,iCAAU,CAAC,GAAG,EAAE,CAAC,kBAAI,CAAC;IACtB,6BAAM,CAAC,qBAAS,CAAC,IAAI,CAAC;;wCACE;AAGzB;IADC,gCAAS,CAAC,GAAG,EAAE,CAAC,kBAAI,CAAC;;sCACF;AAWpB;IATC,qCAAgB,CAAC;QACd,WAAW,EAAE,mBAAmB;QAChC,IAAI,EAAE,UAAU;QAChB,QAAQ,EAAE,IAAI;QACd,OAAO,EAAE,CAAC,sCAAsC,CAAC;KACpD,CAAC;IACD,iCAAU;IACV,iCAAU,CAAC,GAAG,EAAE,CAAC,wBAAO,CAAC;IACzB,6BAAM,CAAE,qBAAS,CAAC,IAAI,CAAC;;2CACI;AAG5B;IADC,gCAAS,CAAC,GAAG,EAAE,CAAC,wBAAO,CAAC;;yCACC;AA5BjB,QAAQ;IANpB,6BAAQ,CAAC;QACN,WAAW,EAAE,gBAAgB;QAC7B,IAAI,EAAE,UAAU;KACnB,CAAC;IACD,sBAAI,CAAC,UAAU,CAAC;IAChB,4BAAK,CAAC,EAAC,SAAS,EAAE,WAAW,EAAC,CAAC;GACnB,QAAQ,CA6BpB;AA7BY,4BAAQ","sourcesContent":["import {\r\n    Table,\r\n    Column,\r\n    Model,\r\n    PrimaryKey,\r\n    ForeignKey,\r\n    BelongsTo,\r\n} from 'sequelize-typescript';\r\nimport {DataTypes} from 'sequelize';\r\nimport {v4String} from 'uuid/interfaces';\r\nimport {IUser, User} from './user.entity';\r\nimport {ApiModel, ApiModelProperty} from 'swagger-express-ts';\r\nimport {Path} from 'typescript-rest';\r\nimport {IProduct, Product} from './product.entity';\r\n\r\nlet IPurchase = 1;\r\n/**\r\n * Interface for classes that represent a purchase\r\n *\r\n * @interface\r\n */\r\nexport interface IPurchase {\r\n    userId: v4String;\r\n    user: IUser;\r\n    productId: v4String;\r\n    product: IProduct;\r\n}\r\nIPurchase = 1;\r\n\r\n/**\r\n * Creates a new Purchase\r\n * @classdesc Database purchases\r\n *\r\n * @class\r\n * @public\r\n * @implements {IPurchase}\r\n */\r\n@ApiModel({\r\n    description: 'Purchase Model',\r\n    name: 'Purchase',\r\n})\r\n@Path('Purchase')\r\n@Table({tableName: 'purchases'})\r\nexport class Purchase extends Model<Purchase> implements IPurchase {\r\n\r\n    @ApiModelProperty({\r\n        description: 'Id of the user',\r\n        type: 'v4String',\r\n        required: true,\r\n        example: ['75442486-0878-440c-9db1-a7006c25a39f'],\r\n    })\r\n    @PrimaryKey\r\n    @ForeignKey(() => User)\r\n    @Column(DataTypes.UUID)\r\n    public userId!: v4String;\r\n\r\n    @BelongsTo(() => User)\r\n    public user!: IUser;\r\n\r\n    @ApiModelProperty({\r\n        description: 'Id of the product',\r\n        type: 'v4String',\r\n        required: true,\r\n        example: ['75442486-0878-440c-9db1-a7006c25a39f'],\r\n    })\r\n    @PrimaryKey\r\n    @ForeignKey(() => Product)\r\n    @Column( DataTypes.UUID)\r\n    public productId!: v4String;\r\n\r\n    @BelongsTo(() => Product)\r\n    public product!: IProduct;\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e59569a7b11c6c95316507a7a2bc0e52c5b7a534"},"D:\\mspr_ci\\src\\entities\\product.entity.ts":{"path":"D:\\mspr_ci\\src\\entities\\product.entity.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":31},"end":{"line":4,"column":62}},"3":{"start":{"line":5,"column":20},"end":{"line":5,"column":40}},"4":{"start":{"line":6,"column":29},"end":{"line":6,"column":58}},"5":{"start":{"line":7,"column":26},"end":{"line":7,"column":52}},"6":{"start":{"line":8,"column":26},"end":{"line":8,"column":54}},"7":{"start":{"line":9,"column":15},"end":{"line":9,"column":16}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":13}},"9":{"start":{"line":11,"column":14},"end":{"line":12,"column":1}},"10":{"start":{"line":13,"column":0},"end":{"line":24,"column":36}},"11":{"start":{"line":25,"column":0},"end":{"line":34,"column":38}},"12":{"start":{"line":35,"column":0},"end":{"line":44,"column":39}},"13":{"start":{"line":45,"column":0},"end":{"line":48,"column":43}},"14":{"start":{"line":46,"column":41},"end":{"line":46,"column":67}},"15":{"start":{"line":49,"column":0},"end":{"line":56,"column":12}},"16":{"start":{"line":57,"column":0},"end":{"line":57,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":46,"column":35},"end":{"line":46,"column":36}},"loc":{"start":{"line":46,"column":41},"end":{"line":46,"column":67}},"line":46}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":0,"15":1,"16":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\entities\\product.entity.ts","sources":["D:\\mspr_ci\\src\\entities\\product.entity.ts"],"names":[],"mappings":";;;AACA,+DAO8B;AAC9B,yCAAoC;AACpC,2DAA8D;AAC9D,qDAAqC;AACrC,uDAAsD;AAEtD,IAAI,QAAQ,GAAG,CAAC,CAAC;AAMjB,QAAQ,GAAG,CAAC,CAAC;AAsBb,IAAa,OAAO,GAApB,MAAa,OAAQ,SAAQ,4BAAc;CAkC1C,CAAA;AAvBG;IATC,qCAAgB,CAAC;QACd,WAAW,EAAE,iBAAiB;QAC9B,QAAQ,EAAE,IAAI;QACd,IAAI,EAAE,UAAU;QAChB,OAAO,EAAE,CAAC,sCAAsC,CAAC;KACpD,CAAC;IACD,iCAAU;IACV,8BAAO,CAAC,qBAAS,CAAC,MAAM,CAAC;IACzB,6BAAM,CAAC,qBAAS,CAAC,IAAI,CAAC;;mCACF;AASrB;IAPC,qCAAgB,CAAC;QACd,WAAW,EAAE,qBAAqB;QAClC,QAAQ,EAAE,IAAI;QACd,OAAO,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,SAAS,CAAC;KACpD,CAAC;IACD,gCAAS,CAAC,KAAK,CAAC;IAChB,6BAAM,CAAC,qBAAS,CAAC,MAAM,CAAC;;qCACJ;AASrB;IAPC,qCAAgB,CAAC;QACd,WAAW,EAAE,sBAAsB;QACnC,QAAQ,EAAE,IAAI;QACd,OAAO,EAAE,CAAC,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC;KAC3B,CAAC;IACD,gCAAS,CAAC,KAAK,CAAC;IAChB,6BAAM,CAAC,qBAAS,CAAC,KAAK,CAAC;;sCACF;AAGtB;IADC,8BAAO,CAAC,GAAG,EAAE,CAAC,0BAAQ,EAAE,WAAW,CAAC;;0CACN;AAhCtB,OAAO;IANnB,6BAAQ,CAAC;QACN,WAAW,EAAE,eAAe;QAC5B,IAAI,EAAE,SAAS;KAClB,CAAC;IACD,sBAAI,CAAC,SAAS,CAAC;IACf,4BAAK,CAAC,EAAC,SAAS,EAAE,UAAU,EAAE,QAAQ,EAAE,IAAI,EAAC,CAAC;GAClC,OAAO,CAkCnB;AAlCY,0BAAO","sourcesContent":["import {v4String} from 'uuid/interfaces';\r\nimport {\r\n    Table,\r\n    Column,\r\n    Model,\r\n    PrimaryKey,\r\n    Default,\r\n    AllowNull, HasMany,\r\n} from 'sequelize-typescript';\r\nimport {DataTypes} from 'sequelize';\r\nimport {ApiModel, ApiModelProperty} from 'swagger-express-ts';\r\nimport {Path} from 'typescript-rest';\r\nimport {IPurchase, Purchase} from './purchase.entity';\r\n\r\nlet IProduct = 1;\r\n/**\r\n * Interface for classes that represent a product\r\n *\r\n * @interface\r\n */\r\nIProduct = 1;\r\nexport interface IProduct {\r\n    id: v4String;\r\n    name: string;\r\n    price: number;\r\n    purchases: IPurchase[];\r\n}\r\n\r\n/**\r\n * Creates a new Product\r\n * @classdesc Database products\r\n *\r\n * @class\r\n * @public\r\n * @implements {IProduct}\r\n */\r\n@ApiModel({\r\n    description: 'Product Model',\r\n    name: 'Product',\r\n})\r\n@Path('Product')\r\n@Table({tableName: 'products', paranoid: true})\r\nexport class Product extends Model<Product> implements IProduct {\r\n\r\n    @ApiModelProperty({\r\n        description: 'Id of a product',\r\n        required: true,\r\n        type: 'v4String',\r\n        example: ['75442486-0878-440c-9db1-a7006c25a39f'],\r\n    })\r\n    @PrimaryKey\r\n    @Default(DataTypes.UUIDV4)\r\n    @Column(DataTypes.UUID)\r\n    public id!: v4String;\r\n\r\n    @ApiModelProperty({\r\n        description: 'Name of the product',\r\n        required: true,\r\n        example: ['Lait', 'Oeuf', 'Saucisson', 'Captain'],\r\n    })\r\n    @AllowNull(false)\r\n    @Column(DataTypes.STRING)\r\n    public name!: string;\r\n\r\n    @ApiModelProperty({\r\n        description: 'Price of the product',\r\n        required: true,\r\n        example: [0.97, 3, 15.2],\r\n    })\r\n    @AllowNull(false)\r\n    @Column(DataTypes.FLOAT)\r\n    public price!: number;\r\n\r\n    @HasMany(() => Purchase, 'productId')\r\n    public purchases!: IPurchase[];\r\n\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a11994a328618a84f7f9af3d225c133f2564048d"},"D:\\mspr_ci\\src\\entities\\user.dto.entity.ts":{"path":"D:\\mspr_ci\\src\\entities\\user.dto.entity.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":29},"end":{"line":4,"column":58}},"3":{"start":{"line":5,"column":26},"end":{"line":5,"column":52}},"4":{"start":{"line":6,"column":14},"end":{"line":13,"column":1}},"5":{"start":{"line":8,"column":8},"end":{"line":8,"column":35}},"6":{"start":{"line":9,"column":8},"end":{"line":9,"column":21}},"7":{"start":{"line":10,"column":8},"end":{"line":10,"column":33}},"8":{"start":{"line":11,"column":8},"end":{"line":11,"column":35}},"9":{"start":{"line":14,"column":0},"end":{"line":22,"column":36}},"10":{"start":{"line":23,"column":0},"end":{"line":30,"column":43}},"11":{"start":{"line":31,"column":0},"end":{"line":38,"column":42}},"12":{"start":{"line":39,"column":0},"end":{"line":47,"column":43}},"13":{"start":{"line":48,"column":0},"end":{"line":55,"column":12}},"14":{"start":{"line":56,"column":0},"end":{"line":56,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":52},"end":{"line":12,"column":5}},"line":7}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\entities\\user.dto.entity.ts","sources":["D:\\mspr_ci\\src\\entities\\user.dto.entity.ts"],"names":[],"mappings":";;;AACA,2DAAyF;AACzF,qDAAqC;AAgBrC,IAAa,OAAO,GAApB,MAAa,OAAO;IAgChB,YAAY,SAAiB,EAAE,EAAY,EAAE,QAAgB,EAAE,SAAsB;QACjF,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;IAC/B,CAAC;CACJ,CAAA;AA9BG;IANC,qCAAgB,CAAC;QACd,WAAW,EAAE,cAAc;QAC3B,QAAQ,EAAE,IAAI;QACd,IAAI,EAAE,UAAU;QAChB,OAAO,EAAE,CAAC,sCAAsC,CAAC;KACpD,CAAC;;mCACkB;AAOpB;IALC,qCAAgB,CAAC;QACd,WAAW,EAAE,uBAAuB;QACpC,QAAQ,EAAE,IAAI;QACd,OAAO,EAAE,CAAC,OAAO,EAAE,QAAQ,EAAE,OAAO,EAAE,MAAM,CAAC;KAChD,CAAC;;0CACuB;AAOzB;IALC,qCAAgB,CAAC;QACd,WAAW,EAAE,sBAAsB;QACnC,QAAQ,EAAE,IAAI;QACd,OAAO,EAAE,CAAC,SAAS,EAAE,OAAO,EAAE,uBAAuB,EAAE,QAAQ,CAAC;KACnE,CAAC;;yCACsB;AAQxB;IANC,qCAAgB,CAAC;QACd,WAAW,EAAE,uBAAuB;QACpC,QAAQ,EAAE,IAAI;QACd,IAAI,EAAE,8CAAyB,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK;QACnD,KAAK,EAAE,UAAU;KACpB,CAAC;;0CAC4B;AA9BrB,OAAO;IALnB,6BAAQ,CAAC;QACN,WAAW,EAAE,gBAAgB;QAC7B,IAAI,EAAE,SAAS;KAClB,CAAC;IACD,sBAAI,CAAC,SAAS,CAAC;;GACH,OAAO,CAsCnB;AAtCY,0BAAO","sourcesContent":["import {v4String} from 'uuid/interfaces';\r\nimport {ApiModel, ApiModelProperty, SwaggerDefinitionConstant} from 'swagger-express-ts';\r\nimport {Path} from 'typescript-rest';\r\nimport {IPurchase} from './purchase.entity';\r\nimport {IUser} from './user.entity';\r\n\r\n/**\r\n * Creates a new UserDTO\r\n * @classdesc Dto purchase\r\n *\r\n * @class\r\n * @implements {IUser}\r\n */\r\n@ApiModel({\r\n    description: 'User DTO Model',\r\n    name: 'UserDTO',\r\n})\r\n@Path('UserDTO')\r\nexport class UserDTO implements IUser {\r\n\r\n    @ApiModelProperty({\r\n        description: 'Id of a User',\r\n        required: true,\r\n        type: 'v4String',\r\n        example: ['75442486-0878-440c-9db1-a7006c25a39f'],\r\n    })\r\n    public id: v4String;\r\n\r\n    @ApiModelProperty({\r\n        description: 'Firstname of the user',\r\n        required: true,\r\n        example: ['Ronan', 'Alexis', 'Louka', 'Rémi'],\r\n    })\r\n    public firstName: string;\r\n\r\n    @ApiModelProperty({\r\n        description: 'Lastname of the user',\r\n        required: true,\r\n        example: ['Laplaud', 'Leroy', 'Houlgatte--Bustamante', 'Castel'],\r\n    })\r\n    public lastName: string;\r\n\r\n    @ApiModelProperty({\r\n        description: 'Purchases of the user',\r\n        required: true,\r\n        type: SwaggerDefinitionConstant.Response.Type.ARRAY,\r\n        model: 'Purchase',\r\n    })\r\n    public purchases: IPurchase[];\r\n\r\n    constructor(firstName: string, id: v4String, lastName: string, purchases: IPurchase[]) {\r\n        this.firstName = firstName;\r\n        this.id = id;\r\n        this.lastName = lastName;\r\n        this.purchases = purchases;\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6829ab391328c01250ba06115827c27be98c565d"},"D:\\mspr_ci\\src\\entities\\purchase.dto.entity.ts":{"path":"D:\\mspr_ci\\src\\entities\\purchase.dto.entity.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":29},"end":{"line":4,"column":58}},"3":{"start":{"line":5,"column":26},"end":{"line":5,"column":52}},"4":{"start":{"line":6,"column":18},"end":{"line":7,"column":1}},"5":{"start":{"line":8,"column":0},"end":{"line":16,"column":42}},"6":{"start":{"line":17,"column":0},"end":{"line":25,"column":45}},"7":{"start":{"line":26,"column":0},"end":{"line":32,"column":16}},"8":{"start":{"line":33,"column":0},"end":{"line":33,"column":34}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\entities\\purchase.dto.entity.ts","sources":["D:\\mspr_ci\\src\\entities\\purchase.dto.entity.ts"],"names":[],"mappings":";;;AAEA,2DAAyF;AACzF,qDAAqC;AAgBrC,IAAa,WAAW,GAAxB,MAAa,WAAW;CAqBvB,CAAA;AAXG;IANC,qCAAgB,CAAC;QACd,WAAW,EAAE,gCAAgC;QAC7C,QAAQ,EAAE,IAAI;QACd,IAAI,EAAE,8CAAyB,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK;QACnD,KAAK,EAAE,MAAM;KAChB,CAAC;;yCACkB;AAUpB;IANC,qCAAgB,CAAC;QACd,WAAW,EAAE,iCAAiC;QAC9C,QAAQ,EAAE,IAAI;QACd,IAAI,EAAE,8CAAyB,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK;QACnD,KAAK,EAAE,SAAS;KACnB,CAAC;;4CACwB;AApBjB,WAAW;IALvB,6BAAQ,CAAC;QACN,WAAW,EAAE,oBAAoB;QACjC,IAAI,EAAE,aAAa;KACtB,CAAC;IACD,sBAAI,CAAC,aAAa,CAAC;GACP,WAAW,CAqBvB;AArBY,kCAAW","sourcesContent":["import {v4String} from 'uuid/interfaces';\r\nimport {IUser} from './user.entity';\r\nimport {ApiModel, ApiModelProperty, SwaggerDefinitionConstant} from 'swagger-express-ts';\r\nimport {Path} from 'typescript-rest';\r\nimport {IProduct} from './product.entity';\r\nimport {IPurchase} from './purchase.entity';\r\n\r\n/**\r\n * Creates a new PurchaseDTO\r\n * @classdesc Dto purchase\r\n *\r\n * @class\r\n * @implements {IPurchase}\r\n */\r\n@ApiModel({\r\n    description: 'Purchase DTO Model',\r\n    name: 'PurchaseDTO',\r\n})\r\n@Path('PurchaseDTO')\r\nexport class PurchaseDTO implements IPurchase {\r\n\r\n    public userId!: v4String;\r\n\r\n    @ApiModelProperty({\r\n        description: 'The user who made the purchase',\r\n        required: true,\r\n        type: SwaggerDefinitionConstant.Response.Type.ARRAY,\r\n        model: 'User',\r\n    })\r\n    public user!: IUser;\r\n\r\n    public productId!: v4String;\r\n\r\n    @ApiModelProperty({\r\n        description: 'The product which was purchased',\r\n        required: true,\r\n        type: SwaggerDefinitionConstant.Response.Type.ARRAY,\r\n        model: 'Product',\r\n    })\r\n    public product!: IProduct;\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"286c0743c5c44e651f5937e22d8464465c6ca2f9"},"D:\\mspr_ci\\src\\entities\\total-revenue.entity.ts":{"path":"D:\\mspr_ci\\src\\entities\\total-revenue.entity.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":29},"end":{"line":4,"column":58}},"3":{"start":{"line":5,"column":26},"end":{"line":5,"column":52}},"4":{"start":{"line":6,"column":20},"end":{"line":6,"column":21}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":18}},"6":{"start":{"line":8,"column":19},"end":{"line":13,"column":1}},"7":{"start":{"line":10,"column":8},"end":{"line":10,"column":41}},"8":{"start":{"line":11,"column":8},"end":{"line":11,"column":41}},"9":{"start":{"line":14,"column":0},"end":{"line":21,"column":51}},"10":{"start":{"line":22,"column":0},"end":{"line":29,"column":51}},"11":{"start":{"line":30,"column":0},"end":{"line":37,"column":17}},"12":{"start":{"line":38,"column":0},"end":{"line":38,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":44},"end":{"line":12,"column":5}},"line":9}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":3,"8":3,"9":1,"10":1,"11":1,"12":1},"f":{"0":3},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\entities\\total-revenue.entity.ts","sources":["D:\\mspr_ci\\src\\entities\\total-revenue.entity.ts"],"names":[],"mappings":";;;AAAA,2DAA8D;AAC9D,qDAAqC;AAErC,IAAI,aAAa,GAAG,CAAC,CAAC;AAOtB,aAAa,GAAG,CAAC,CAAC;AAoBlB,IAAa,YAAY,GAAzB,MAAa,YAAY;IAgBrB,YAAY,YAAoB,EAAE,YAAoB;QAClD,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;QACjC,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;IACrC,CAAC;CACJ,CAAA;AAbG;IALC,qCAAgB,CAAC;QACd,WAAW,EAAE,+BAA+B;QAC5C,QAAQ,EAAE,IAAI;QACd,OAAO,EAAE,CAAC,OAAO,EAAE,QAAQ,EAAE,OAAO,CAAC;KACxC,CAAC;;kDAC0B;AAO5B;IALC,qCAAgB,CAAC;QACd,WAAW,EAAE,+BAA+B;QAC5C,QAAQ,EAAE,IAAI;QACd,OAAO,EAAE,CAAC,OAAO,EAAE,QAAQ,EAAE,OAAO,CAAC;KACxC,CAAC;;kDAC0B;AAdnB,YAAY;IALxB,6BAAQ,CAAC;QACN,WAAW,EAAE,qBAAqB;QAClC,IAAI,EAAE,cAAc;KACvB,CAAC;IACD,sBAAI,CAAC,cAAc,CAAC;;GACR,YAAY,CAoBxB;AApBY,oCAAY","sourcesContent":["import {ApiModel, ApiModelProperty} from 'swagger-express-ts';\r\nimport {Path} from 'typescript-rest';\r\n\r\nlet ITotalRevenue = 1;\r\n/**\r\n * Interface for classes that represent a total revenue\r\n *\r\n * @since 1.0.1\r\n * @interface\r\n */\r\nITotalRevenue = 1;\r\nexport interface ITotalRevenue {\r\n    excludingTax: number;\r\n    includingTax: number;\r\n}\r\n\r\n/**\r\n * Creates a new TotalRevenue\r\n * @classdesc Total revenue of a company\r\n *\r\n * @class\r\n * @since 1.0.1\r\n * @public\r\n * @implements {ITotalRevenue}\r\n */\r\n@ApiModel({\r\n    description: 'Total Revenue Model',\r\n    name: 'TotalRevenue',\r\n})\r\n@Path('TotalRevenue')\r\nexport class TotalRevenue implements ITotalRevenue {\r\n\r\n    @ApiModelProperty({\r\n        description: 'Total revenue excluding taxes',\r\n        required: true,\r\n        example: [1500.35, 10000005, 35487.3],\r\n    })\r\n    public excludingTax: number;\r\n\r\n    @ApiModelProperty({\r\n        description: 'Total revenue including taxes',\r\n        required: true,\r\n        example: [1500.35, 10000005, 35487.3],\r\n    })\r\n    public includingTax: number;\r\n\r\n    constructor(excludingTax: number, includingTax: number) {\r\n        this.excludingTax = excludingTax;\r\n        this.includingTax = includingTax;\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9a1cb347010eece3e38918954fcbe87f5931c4e0"},"D:\\mspr_ci\\spec\\company.spec.ts":{"path":"D:\\mspr_ci\\spec\\company.spec.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":14},"end":{"line":4,"column":60}},"3":{"start":{"line":5,"column":20},"end":{"line":5,"column":65}},"4":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"5":{"start":{"line":7,"column":28},"end":{"line":7,"column":56}},"6":{"start":{"line":8,"column":26},"end":{"line":8,"column":68}},"7":{"start":{"line":9,"column":16},"end":{"line":9,"column":32}},"8":{"start":{"line":10,"column":16},"end":{"line":10,"column":27}},"9":{"start":{"line":11,"column":0},"end":{"line":88,"column":3}},"10":{"start":{"line":13,"column":4},"end":{"line":16,"column":7}},"11":{"start":{"line":14,"column":8},"end":{"line":14,"column":57}},"12":{"start":{"line":15,"column":8},"end":{"line":15,"column":15}},"13":{"start":{"line":17,"column":25},"end":{"line":20,"column":5}},"14":{"start":{"line":21,"column":22},"end":{"line":44,"column":5}},"15":{"start":{"line":45,"column":4},"end":{"line":54,"column":7}},"16":{"start":{"line":46,"column":8},"end":{"line":53,"column":11}},"17":{"start":{"line":47,"column":12},"end":{"line":52,"column":15}},"18":{"start":{"line":49,"column":16},"end":{"line":49,"column":36}},"19":{"start":{"line":50,"column":16},"end":{"line":50,"column":71}},"20":{"start":{"line":51,"column":16},"end":{"line":51,"column":23}},"21":{"start":{"line":55,"column":4},"end":{"line":87,"column":7}},"22":{"start":{"line":56,"column":8},"end":{"line":64,"column":11}},"23":{"start":{"line":57,"column":12},"end":{"line":57,"column":103}},"24":{"start":{"line":58,"column":12},"end":{"line":63,"column":15}},"25":{"start":{"line":60,"column":16},"end":{"line":60,"column":36}},"26":{"start":{"line":61,"column":16},"end":{"line":61,"column":64}},"27":{"start":{"line":62,"column":16},"end":{"line":62,"column":23}},"28":{"start":{"line":65,"column":8},"end":{"line":75,"column":11}},"29":{"start":{"line":66,"column":12},"end":{"line":66,"column":103}},"30":{"start":{"line":67,"column":12},"end":{"line":74,"column":15}},"31":{"start":{"line":69,"column":16},"end":{"line":69,"column":36}},"32":{"start":{"line":70,"column":31},"end":{"line":70,"column":52}},"33":{"start":{"line":71,"column":16},"end":{"line":71,"column":53}},"34":{"start":{"line":72,"column":16},"end":{"line":72,"column":55}},"35":{"start":{"line":73,"column":16},"end":{"line":73,"column":23}},"36":{"start":{"line":76,"column":8},"end":{"line":86,"column":11}},"37":{"start":{"line":77,"column":12},"end":{"line":77,"column":128}},"38":{"start":{"line":78,"column":12},"end":{"line":85,"column":15}},"39":{"start":{"line":80,"column":16},"end":{"line":80,"column":36}},"40":{"start":{"line":81,"column":31},"end":{"line":81,"column":52}},"41":{"start":{"line":82,"column":16},"end":{"line":82,"column":53}},"42":{"start":{"line":83,"column":16},"end":{"line":83,"column":55}},"43":{"start":{"line":84,"column":16},"end":{"line":84,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":11,"column":27},"end":{"line":11,"column":28}},"loc":{"start":{"line":11,"column":33},"end":{"line":88,"column":1}},"line":11},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":14},"end":{"line":13,"column":15}},"loc":{"start":{"line":13,"column":24},"end":{"line":16,"column":5}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":45,"column":22},"end":{"line":45,"column":23}},"loc":{"start":{"line":45,"column":28},"end":{"line":54,"column":5}},"line":45},"3":{"name":"(anonymous_3)","decl":{"start":{"line":46,"column":38},"end":{"line":46,"column":39}},"loc":{"start":{"line":46,"column":48},"end":{"line":53,"column":9}},"line":46},"4":{"name":"(anonymous_4)","decl":{"start":{"line":48,"column":21},"end":{"line":48,"column":22}},"loc":{"start":{"line":48,"column":35},"end":{"line":52,"column":13}},"line":48},"5":{"name":"(anonymous_5)","decl":{"start":{"line":55,"column":34},"end":{"line":55,"column":35}},"loc":{"start":{"line":55,"column":40},"end":{"line":87,"column":5}},"line":55},"6":{"name":"(anonymous_6)","decl":{"start":{"line":56,"column":38},"end":{"line":56,"column":39}},"loc":{"start":{"line":56,"column":48},"end":{"line":64,"column":9}},"line":56},"7":{"name":"(anonymous_7)","decl":{"start":{"line":59,"column":21},"end":{"line":59,"column":22}},"loc":{"start":{"line":59,"column":35},"end":{"line":63,"column":13}},"line":59},"8":{"name":"(anonymous_8)","decl":{"start":{"line":65,"column":61},"end":{"line":65,"column":62}},"loc":{"start":{"line":65,"column":71},"end":{"line":75,"column":9}},"line":65},"9":{"name":"(anonymous_9)","decl":{"start":{"line":68,"column":21},"end":{"line":68,"column":22}},"loc":{"start":{"line":68,"column":35},"end":{"line":74,"column":13}},"line":68},"10":{"name":"(anonymous_10)","decl":{"start":{"line":76,"column":76},"end":{"line":76,"column":77}},"loc":{"start":{"line":76,"column":86},"end":{"line":86,"column":9}},"line":76},"11":{"name":"(anonymous_11)","decl":{"start":{"line":79,"column":21},"end":{"line":79,"column":22}},"loc":{"start":{"line":79,"column":35},"end":{"line":85,"column":13}},"line":79}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\spec\\company.spec.ts","sources":["D:\\mspr_ci\\spec\\company.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import app from '../src/app';\r\nimport supertest from 'supertest';\r\n\r\nimport { Response, SuperTest, Test } from 'supertest';\r\nimport {pErr} from '@shared';\r\nimport {NOT_FOUND, OK} from 'http-status-codes';\r\nimport {IProduct, IPurchase, ITotalRevenue, IUser} from '@entities';\r\nimport {CompanyService} from '../src/services/company.service';\r\nimport {v4String} from 'uuid/interfaces';\r\nimport {PurchaseDao} from '@daos';\r\nconst baseUrl = '/company/';\r\n\r\ndescribe('Company Routes', () => {\r\n\r\n    let agent: SuperTest<Test>;\r\n\r\n    beforeAll((done) => {\r\n        agent = supertest.agent(app);\r\n        done();\r\n    });\r\n\r\n    const totalRevenue = {\r\n        excludingTax: 20,\r\n        includingTax: 24,\r\n    } as ITotalRevenue;\r\n\r\n    const purchases = [\r\n        {\r\n            userId: 'c498e2aa-1c42-4827-80be-9fc6edeeaee3' as unknown as v4String,\r\n            user: {},\r\n            productId: 'c498e2aa-1c42-4827-80be-9fc6edeeaee8' as unknown as v4String,\r\n            product: {\r\n                id: 'c498e2aa-1c42-4827-80be-9fc6edeeaee8' as unknown as v4String,\r\n                name: 'ventoline',\r\n                price: 5,\r\n                purchases: [],\r\n            } as IProduct,\r\n        } as IPurchase,\r\n        {\r\n            userId: '62c0eab7-78ea-45f9-b552-0a83209ff02c' as unknown as v4String,\r\n            user: {},\r\n            productId: 'c498e2aa-1c42-4827-80be-9fc6edeeaee8' as unknown as v4String,\r\n            product: {\r\n                id: 'c498e2aa-1c42-4827-80be-9fc6edeeaee7' as unknown as v4String,\r\n                name: 'gingembre',\r\n                price: 15,\r\n                purchases: [],\r\n            } as IProduct,\r\n        } as IPurchase,\r\n    ];\r\n\r\n    describe('GET /', () => {\r\n        it('returns status code 404', (done) => {\r\n            agent.get(baseUrl)\r\n                .end((err: Error, res: Response) => {\r\n                    pErr(err);\r\n                    expect(res.status).toBe(NOT_FOUND);\r\n                    done();\r\n                });\r\n        });\r\n    });\r\n\r\n    describe('GET /totalRevenue', () => {\r\n        it('returns status code 200', (done) => {\r\n            spyOn(PurchaseDao.prototype, 'getAll').and.returnValue(Promise.resolve(purchases));\r\n            agent.get(baseUrl + 'totalRevenue')\r\n                .end((err: Error, res: Response) => {\r\n                    pErr(err);\r\n                    expect(res.status).toBe(OK);\r\n                    done();\r\n                });\r\n        });\r\n\r\n        it('spy on dao should return correct total revenue', (done) => {\r\n            spyOn(PurchaseDao.prototype, 'getAll').and.returnValue(Promise.resolve(purchases));\r\n            agent.get(baseUrl + 'totalRevenue')\r\n                .end((err: Error, res: Response) => {\r\n                    pErr(err);\r\n                    const retTot = res.body.totalRevenue;\r\n                    expect(retTot).toEqual(totalRevenue);\r\n                    expect(res.body.error).toBeUndefined();\r\n                    done();\r\n                });\r\n        });\r\n\r\n        it('controller should return a JSON object with the total Revenue', (done) => {\r\n            spyOn(CompanyService.prototype, 'getTotalRevenue').and.returnValue(Promise.resolve(totalRevenue));\r\n            agent.get(baseUrl + 'totalRevenue')\r\n                .end((err: Error, res: Response) => {\r\n                    pErr(err);\r\n                    const retTot = res.body.totalRevenue;\r\n                    expect(retTot).toEqual(totalRevenue);\r\n                    expect(res.body.error).toBeUndefined();\r\n                    done();\r\n                });\r\n        });\r\n    });\r\n});\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d89d4cbc8dc781ca02002831aa9f80397d75f2e8"},"D:\\mspr_ci\\src\\app.ts":{"path":"D:\\mspr_ci\\src\\app.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":24},"end":{"line":4,"column":73}},"3":{"start":{"line":5,"column":18},"end":{"line":5,"column":61}},"4":{"start":{"line":6,"column":17},"end":{"line":6,"column":59}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":28}},"6":{"start":{"line":8,"column":34},"end":{"line":8,"column":68}},"7":{"start":{"line":9,"column":20},"end":{"line":9,"column":74}},"8":{"start":{"line":10,"column":16},"end":{"line":10,"column":67}},"9":{"start":{"line":11,"column":19},"end":{"line":11,"column":63}},"10":{"start":{"line":12,"column":18},"end":{"line":12,"column":36}},"11":{"start":{"line":13,"column":15},"end":{"line":13,"column":55}},"12":{"start":{"line":14,"column":15},"end":{"line":14,"column":88}},"13":{"start":{"line":15,"column":0},"end":{"line":37,"column":3}},"14":{"start":{"line":16,"column":4},"end":{"line":16,"column":37}},"15":{"start":{"line":17,"column":27},"end":{"line":17,"column":81}},"16":{"start":{"line":18,"column":4},"end":{"line":21,"column":8}},"17":{"start":{"line":22,"column":4},"end":{"line":22,"column":43}},"18":{"start":{"line":23,"column":4},"end":{"line":23,"column":44}},"19":{"start":{"line":24,"column":4},"end":{"line":24,"column":68}},"20":{"start":{"line":25,"column":4},"end":{"line":25,"column":45}},"21":{"start":{"line":26,"column":4},"end":{"line":26,"column":87}},"22":{"start":{"line":27,"column":4},"end":{"line":27,"column":115}},"23":{"start":{"line":28,"column":4},"end":{"line":36,"column":8}},"24":{"start":{"line":38,"column":0},"end":{"line":43,"column":3}},"25":{"start":{"line":39,"column":4},"end":{"line":42,"column":7}},"26":{"start":{"line":40,"column":8},"end":{"line":40,"column":46}},"27":{"start":{"line":41,"column":8},"end":{"line":41,"column":54}},"28":{"start":{"line":44,"column":12},"end":{"line":44,"column":26}},"29":{"start":{"line":45,"column":0},"end":{"line":45,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":15,"column":17},"end":{"line":15,"column":18}},"loc":{"start":{"line":15,"column":32},"end":{"line":37,"column":1}},"line":15},"1":{"name":"(anonymous_1)","decl":{"start":{"line":38,"column":22},"end":{"line":38,"column":23}},"loc":{"start":{"line":38,"column":34},"end":{"line":43,"column":1}},"line":38},"2":{"name":"(anonymous_2)","decl":{"start":{"line":39,"column":15},"end":{"line":39,"column":16}},"loc":{"start":{"line":39,"column":49},"end":{"line":42,"column":5}},"line":39}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":53},"end":{"line":17,"column":80}},"type":"binary-expr","locations":[{"start":{"line":17,"column":53},"end":{"line":17,"column":74}},{"start":{"line":17,"column":78},"end":{"line":17,"column":80}}],"line":17}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1},"f":{"0":1,"1":1,"2":0},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\app.ts","sources":["D:\\mspr_ci\\src\\app.ts"],"names":[],"mappings":";;;AAAA,0EAAyC;AACzC,8DAA8B;AAC9B,4DAA4B;AAC5B,4BAA0B;AAC1B,qEAA+D;AAC/D,2EAA2C;AAC3C,oEAA8C;AAC9C,gEAA0C;AAC1C,qCAAyC;AACzC,wDAAwB;AAExB,MAAM,MAAM,GAAG,IAAI,gDAAsB,CAAC,mBAAS,CAAC,CAAC;AACrD,MAAM,CAAC,SAAS,CAAC,CAAC,SAAc,EAAE,EAAE;IAChC,SAAS,CAAC,GAAG,CAAE,UAAU,CAAC,IAAI,EAAE,CAAE,CAAC;IAEnC,MAAM,cAAc,GAAG,CAAC,uBAAuB,EAAE,OAAO,CAAC,GAAG,CAAC,SAAS,IAAI,EAAE,CAAC,CAAC;IAC9E,SAAS,CAAC,GAAG,CAAC,cAAI,CAAC;QACf,MAAM,EAAE,cAAc;QACtB,WAAW,EAAE,IAAI;KACpB,CAAC,CAAC,CAAC;IACJ,SAAS,CAAC,GAAG,CAAC,gBAAM,CAAC,KAAK,CAAC,CAAC,CAAC;IAC7B,SAAS,CAAC,GAAG,CAAC,iBAAO,CAAC,IAAI,EAAE,CAAC,CAAC;IAC9B,SAAS,CAAC,GAAG,CAAC,iBAAO,CAAC,UAAU,CAAC,EAAC,QAAQ,EAAE,IAAI,EAAC,CAAC,CAAC,CAAC;IACpD,SAAS,CAAC,GAAG,CAAC,uBAAY,EAAE,CAAC,CAAC;IAC9B,SAAS,CAAC,GAAG,CAAE,8BAA8B,EAAG,iBAAO,CAAC,MAAM,CAAE,SAAS,CAAE,CAAE,CAAC;IAC9E,SAAS,CAAC,GAAG,CAAE,qCAAqC,EAAG,iBAAO,CAAC,MAAM,CAAE,8BAA8B,CAAE,CAAE,CAAC;IAC1G,SAAS,CAAC,GAAG,CAAE,OAAO,CAAC,OAAO,CAC1B;QACI,UAAU,EAAG;YACT,IAAI,EAAG;gBACH,KAAK,EAAG,0BAA0B;gBAClC,OAAO,EAAG,KAAK;aAClB;SACJ;QACD,IAAI,EAAE,mCAAmC;KAC5C,CACJ,CAAC,CAAC;AACP,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,cAAc,CAAC,CAAC,MAAW,EAAE,EAAE;IAClC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAU,EAAE,OAAwB,EAAE,QAA0B,EAAE,IAA0B,EAAG,EAAE;QACzG,0BAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC5B,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC;AACP,CAAC,CAAC,CAAC;AAEH,MAAM,GAAG,GAAG,MAAM,CAAC,KAAK,EAAE,CAAC;AAC3B,kBAAe,GAAG,CAAC","sourcesContent":["import cookieParser from 'cookie-parser';\r\nimport express from 'express';\r\nimport logger from 'morgan';\r\nimport 'reflect-metadata';\r\nimport {InversifyExpressServer} from 'inversify-express-utils';\r\nimport container from './shared/Container';\r\nimport * as swagger from 'swagger-express-ts';\r\nimport * as bodyParser from 'body-parser';\r\nimport {globalInfoLogger} from '@shared';\r\nimport cors from 'cors';\r\n\r\nconst server = new InversifyExpressServer(container);\r\nserver.setConfig((appConfig: any) => {\r\n    appConfig.use( bodyParser.json() );\r\n\r\n    const allowedOrigins = ['http://localhost:3000', process.env.FRONT_URL || ''];\r\n    appConfig.use(cors({\r\n        origin: allowedOrigins,\r\n        credentials: true,\r\n    }));\r\n    appConfig.use(logger('dev'));\r\n    appConfig.use(express.json());\r\n    appConfig.use(express.urlencoded({extended: true}));\r\n    appConfig.use(cookieParser());\r\n    appConfig.use( '/api-docs/highlander/swagger' , express.static( 'swagger' ) );\r\n    appConfig.use( '/api-docs/highlander/swagger/assets' , express.static( 'node_modules/swagger-ui-dist' ) );\r\n    appConfig.use( swagger.express(\r\n        {\r\n            definition : {\r\n                info : {\r\n                    title : 'highlander micro-service',\r\n                    version : '1.0',\r\n                },\r\n            },\r\n            path: '/api-docs/highlander/swagger.json',\r\n        },\r\n    ));\r\n});\r\n\r\nserver.setErrorConfig((appErr: any) => {\r\n    appErr.use((err: Error, request: express.Request, response: express.Response, next: express.NextFunction ) => {\r\n        globalInfoLogger.error(err);\r\n        response.status(500).send('Something broke!');\r\n    });\r\n});\r\n\r\nconst app = server.build();\r\nexport default app;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ceee726a96500716d99ab0612a6aebc4d329f5bc"},"D:\\mspr_ci\\src\\shared\\Container.ts":{"path":"D:\\mspr_ci\\src\\shared\\Container.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":3,"column":40}},"2":{"start":{"line":4,"column":34},"end":{"line":4,"column":68}},"3":{"start":{"line":5,"column":26},"end":{"line":5,"column":67}},"4":{"start":{"line":6,"column":30},"end":{"line":6,"column":75}},"5":{"start":{"line":7,"column":29},"end":{"line":7,"column":73}},"6":{"start":{"line":8,"column":18},"end":{"line":8,"column":45}},"7":{"start":{"line":9,"column":0},"end":{"line":10,"column":123}},"8":{"start":{"line":11,"column":0},"end":{"line":12,"column":139}},"9":{"start":{"line":13,"column":0},"end":{"line":14,"column":135}},"10":{"start":{"line":15,"column":0},"end":{"line":15,"column":28}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\shared\\Container.ts","sources":["D:\\mspr_ci\\src\\shared\\Container.ts"],"names":[],"mappings":";;AAAA,yCAAoC;AACpC,qEAAyD;AACzD,oEAA8D;AAC9D,4EAAsE;AACtE,0EAAoE;AAEpE,MAAM,SAAS,GAAG,IAAI,qBAAS,EAAE,CAAC;AAClC,SAAS,CAAC,IAAI,CAAwB,8BAAI,CAAC,UAAU,CAAC;KACjD,EAAE,CAAC,gCAAc,CAAC,CAAC,gBAAgB,EAAE,CAAC,eAAe,CAAC,gCAAc,CAAC,WAAW,CAAC,CAAC;AACvF,SAAS,CAAC,IAAI,CAAwB,8BAAI,CAAC,UAAU,CAAC;KACjD,EAAE,CAAC,wCAAkB,CAAC,CAAC,gBAAgB,EAAE,CAAC,eAAe,CAAC,wCAAkB,CAAC,WAAW,CAAC,CAAC;AAC/F,SAAS,CAAC,IAAI,CAAwB,8BAAI,CAAC,UAAU,CAAC;KACjD,EAAE,CAAC,sCAAiB,CAAC,CAAC,gBAAgB,EAAE,CAAC,eAAe,CAAC,sCAAiB,CAAC,WAAW,CAAC,CAAC;AAE7F,kBAAe,SAAS,CAAC","sourcesContent":["import {Container} from 'inversify';\r\nimport {interfaces, TYPE} from 'inversify-express-utils';\r\nimport {UserController} from '../controllers/user.controller';\r\nimport {PurchaseController} from '../controllers/purchase.controller';\r\nimport {CompanyController} from '../controllers/company.controller';\r\n\r\nconst container = new Container();\r\ncontainer.bind<interfaces.Controller>(TYPE.Controller)\r\n    .to(UserController).inSingletonScope().whenTargetNamed(UserController.TARGET_NAME);\r\ncontainer.bind<interfaces.Controller>(TYPE.Controller)\r\n    .to(PurchaseController).inSingletonScope().whenTargetNamed(PurchaseController.TARGET_NAME);\r\ncontainer.bind<interfaces.Controller>(TYPE.Controller)\r\n    .to(CompanyController).inSingletonScope().whenTargetNamed(CompanyController.TARGET_NAME);\r\n\r\nexport default container;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1efd8d06923b744e09150e0de75bf65db1ef554c"},"D:\\mspr_ci\\src\\controllers\\user.controller.ts":{"path":"D:\\mspr_ci\\src\\controllers\\user.controller.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":29},"end":{"line":4,"column":58}},"3":{"start":{"line":5,"column":34},"end":{"line":5,"column":68}},"4":{"start":{"line":6,"column":16},"end":{"line":6,"column":56}},"5":{"start":{"line":7,"column":28},"end":{"line":7,"column":56}},"6":{"start":{"line":8,"column":18},"end":{"line":8,"column":36}},"7":{"start":{"line":9,"column":23},"end":{"line":9,"column":58}},"8":{"start":{"line":10,"column":20},"end":{"line":10,"column":40}},"9":{"start":{"line":11,"column":21},"end":{"line":48,"column":1}},"10":{"start":{"line":13,"column":8},"end":{"line":13,"column":60}},"11":{"start":{"line":16,"column":8},"end":{"line":27,"column":11}},"12":{"start":{"line":17,"column":12},"end":{"line":26,"column":13}},"13":{"start":{"line":18,"column":30},"end":{"line":18,"column":61}},"14":{"start":{"line":19,"column":16},"end":{"line":19,"column":79}},"15":{"start":{"line":22,"column":16},"end":{"line":22,"column":67}},"16":{"start":{"line":23,"column":16},"end":{"line":25,"column":19}},"17":{"start":{"line":30,"column":8},"end":{"line":46,"column":11}},"18":{"start":{"line":31,"column":12},"end":{"line":45,"column":13}},"19":{"start":{"line":32,"column":29},"end":{"line":32,"column":78}},"20":{"start":{"line":33,"column":16},"end":{"line":37,"column":17}},"21":{"start":{"line":34,"column":20},"end":{"line":36,"column":23}},"22":{"start":{"line":38,"column":16},"end":{"line":38,"column":74}},"23":{"start":{"line":41,"column":16},"end":{"line":41,"column":67}},"24":{"start":{"line":42,"column":16},"end":{"line":44,"column":19}},"25":{"start":{"line":49,"column":0},"end":{"line":49,"column":46}},"26":{"start":{"line":50,"column":0},"end":{"line":70,"column":45}},"27":{"start":{"line":71,"column":0},"end":{"line":91,"column":46}},"28":{"start":{"line":92,"column":0},"end":{"line":99,"column":19}},"29":{"start":{"line":100,"column":0},"end":{"line":100,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":18},"end":{"line":14,"column":5}},"line":12},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":36},"end":{"line":28,"column":5}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":16,"column":55},"end":{"line":16,"column":56}},"loc":{"start":{"line":16,"column":68},"end":{"line":27,"column":9}},"line":16},"3":{"name":"(anonymous_3)","decl":{"start":{"line":29,"column":4},"end":{"line":29,"column":5}},"loc":{"start":{"line":29,"column":37},"end":{"line":47,"column":5}},"line":29},"4":{"name":"(anonymous_4)","decl":{"start":{"line":30,"column":55},"end":{"line":30,"column":56}},"loc":{"start":{"line":30,"column":68},"end":{"line":46,"column":9}},"line":30}},"branchMap":{"0":{"loc":{"start":{"line":33,"column":16},"end":{"line":37,"column":17}},"type":"if","locations":[{"start":{"line":33,"column":16},"end":{"line":37,"column":17}},{"start":{"line":33,"column":16},"end":{"line":37,"column":17}}],"line":33}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":3,"12":3,"13":3,"14":3,"15":0,"16":0,"17":3,"18":3,"19":3,"20":3,"21":1,"22":2,"23":0,"24":0,"25":1,"26":1,"27":1,"28":1,"29":1},"f":{"0":1,"1":3,"2":3,"3":3,"4":3},"b":{"0":[1,2]},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\controllers\\user.controller.ts","sources":["D:\\mspr_ci\\src\\controllers\\user.controller.ts"],"names":[],"mappings":";;;AAAA,2DAI4B;AAC5B,qEAAwE;AAExE,yDAAmC;AACnC,yDAA6D;AAC7D,qCAAsF;AACtF,2DAAmE;AACnE,yCAAuC;AAuBvC,IAAa,cAAc,GAA3B,MAAa,cAAc;IAA3B;QAEY,gBAAW,GAAiB,IAAI,0BAAW,EAAE,CAAC;IAwE1D,CAAC;IApDgB,MAAM,CACf,OAAwB,EACxB,QAA0B,EAC1B,IAA0B;;YAE1B,IAAI;gBACA,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;gBAC9C,OAAO,QAAQ,CAAC,MAAM,CAAC,sBAAE,CAAC,CAAC,IAAI,CAAC,EAAC,KAAK,EAAC,CAAC,CAAC;aAC5C;YAAC,OAAO,GAAG,EAAE;gBACV,0BAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;gBACzC,OAAO,QAAQ,CAAC,MAAM,CAAC,+BAAW,CAAC,CAAC,IAAI,CAAC;oBACrC,KAAK,EAAE,GAAG,CAAC,OAAO;iBACrB,CAAC,CAAC;aACN;QACL,CAAC;KAAA;IAkBY,OAAO,CAChB,OAAwB,EACxB,QAA0B,EAC1B,IAA0B;;YAE1B,IAAI;gBACA,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,EAAyB,CAAC,CAAC;gBACtF,IAAI,IAAI,KAAK,IAAI,EAAE;oBACf,OAAO,QAAQ,CAAC,MAAM,CAAC,6BAAS,CAAC,CAAC,IAAI,CAAC;wBACnC,KAAK,EAAE,gBAAgB;qBAC1B,CAAC,CAAC;iBACN;gBACD,OAAO,QAAQ,CAAC,MAAM,CAAC,sBAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACzC;YAAC,OAAO,GAAG,EAAE;gBACV,0BAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;gBACzC,OAAO,QAAQ,CAAC,MAAM,CAAC,6BAAS,CAAC,CAAC,IAAI,CAAC;oBACnC,KAAK,EAAE,GAAG,CAAC,OAAO;iBACrB,CAAC,CAAC;aACN;QACL,CAAC;KAAA;CACJ,CAAA;AAtEiB,0BAAW,GAAG,gBAAgB,CAAC;AAkB7C;IAhBC,qDAA2C,CAAC,MAAM,CAAC;IACnD,oCAAe,CAAC;QACb,WAAW,EAAE,WAAW;QACxB,OAAO,EAAE,eAAe;QACxB,SAAS,EAAE;YACP,GAAG,EAAE;gBACD,WAAW,EAAE,SAAS;gBACtB,IAAI,EAAE,8CAAyB,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK;gBACnD,KAAK,EAAE,SAAS;aACnB;YACD,GAAG,EAAE;gBACD,WAAW,EAAE,aAAa;aAC7B;SACJ;KACJ,CAAC;IACD,iCAAO,CAAC,EAAE,CAAC;;;;4CAeX;AAkBD;IAhBC,qDAA2C,CAAC,MAAM,CAAC;IACnD,oCAAe,CAAC;QACb,WAAW,EAAE,oBAAoB;QACjC,OAAO,EAAE,yCAAyC;QAClD,IAAI,EAAE,OAAO;QACb,SAAS,EAAE;YACP,GAAG,EAAE;gBACD,WAAW,EAAE,SAAS;gBACtB,KAAK,EAAE,SAAS;aACnB;YACD,GAAG,EAAE;gBACD,WAAW,EAAE,WAAW;aAC3B;SACJ;KACJ,CAAC;IACD,iCAAO,CAAC,MAAM,CAAC;;;;6CAoBf;AAzEQ,cAAc;IAR1B,4BAAO,CAAC;QACL,IAAI,EAAE,QAAQ;QACd,IAAI,EAAE,MAAM;KACf,CAAC;IACD,oCAAU,CACP,QAAQ,CACX;IACA,sBAAU,EAAE;GACA,cAAc,CA0E1B;AA1EY,wCAAc","sourcesContent":["import {\r\n    ApiOperationGet,\r\n    ApiPath,\r\n    SwaggerDefinitionConstant,\r\n} from 'swagger-express-ts';\r\nimport {controller, httpGet, interfaces} from 'inversify-express-utils';\r\nimport {v4String} from 'uuid/interfaces';\r\nimport * as express from 'express';\r\nimport {BAD_REQUEST, NOT_FOUND, OK} from 'http-status-codes';\r\nimport {globalInfoLogger, NameCallerArgsReturnLogControllersInfoLevel} from '@shared';\r\nimport {IUserService, UserService} from '../services/user.service';\r\nimport { injectable } from 'inversify';\r\n\r\ninterface IUserController {\r\n    getAll: (\r\n        request: express.Request,\r\n        response: express.Response,\r\n        next: express.NextFunction,\r\n    ) => Promise<express.Response>;\r\n    getById: (\r\n        request: express.Request,\r\n        response: express.Response,\r\n        next: express.NextFunction,\r\n    ) => Promise<express.Response>;\r\n}\r\n\r\n@ApiPath({\r\n    path: '/users',\r\n    name: 'User',\r\n})\r\n@controller(\r\n    '/users',\r\n)\r\n@injectable()\r\nexport class UserController implements interfaces.Controller, IUserController {\r\n\r\n    private userService: IUserService = new UserService();\r\n\r\n    public static TARGET_NAME = 'UserController';\r\n\r\n    @NameCallerArgsReturnLogControllersInfoLevel('User')\r\n    @ApiOperationGet({\r\n        description: 'Get users',\r\n        summary: 'Get all users',\r\n        responses: {\r\n            200: {\r\n                description: 'Success',\r\n                type: SwaggerDefinitionConstant.Response.Type.ARRAY,\r\n                model: 'UserDTO',\r\n            },\r\n            400: {\r\n                description: 'Bad request',\r\n            },\r\n        },\r\n    })\r\n    @httpGet('')\r\n    public async getAll(\r\n        request: express.Request,\r\n        response: express.Response,\r\n        next: express.NextFunction,\r\n    ): Promise<express.Response> {\r\n        try {\r\n            const users = await this.userService.getAll();\r\n            return response.status(OK).json({users});\r\n        } catch (err) {\r\n            globalInfoLogger.error(err.message, err);\r\n            return response.status(BAD_REQUEST).json({\r\n                error: err.message,\r\n            });\r\n        }\r\n    }\r\n\r\n    @NameCallerArgsReturnLogControllersInfoLevel('User')\r\n    @ApiOperationGet({\r\n        description: 'Get user by his id',\r\n        summary: 'Get details of a user specifying his id',\r\n        path: '/{id}',\r\n        responses: {\r\n            200: {\r\n                description: 'Success',\r\n                model: 'UserDTO',\r\n            },\r\n            404: {\r\n                description: 'Not found',\r\n            },\r\n        },\r\n    })\r\n    @httpGet('/:id')\r\n    public async getById(\r\n        request: express.Request,\r\n        response: express.Response,\r\n        next: express.NextFunction,\r\n    ): Promise<express.Response> {\r\n        try {\r\n            const user = await this.userService.getById(request.params.id as unknown as v4String);\r\n            if (user === null) {\r\n                return response.status(NOT_FOUND).json({\r\n                    error: 'User not found',\r\n                });\r\n            }\r\n            return response.status(OK).json(user);\r\n        } catch (err) {\r\n            globalInfoLogger.error(err.message, err);\r\n            return response.status(NOT_FOUND).json({\r\n                error: err.message,\r\n            });\r\n        }\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"448f719e77287df7416c1ea923db9747da1dc9ca"},"D:\\mspr_ci\\src\\services\\user.service.ts":{"path":"D:\\mspr_ci\\src\\services\\user.service.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":32}},"3":{"start":{"line":5,"column":18},"end":{"line":5,"column":36}},"4":{"start":{"line":6,"column":19},"end":{"line":6,"column":20}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":17}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":45}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":37}},"8":{"start":{"line":16,"column":8},"end":{"line":16,"column":40}},"9":{"start":{"line":19,"column":0},"end":{"line":24,"column":42}},"10":{"start":{"line":25,"column":0},"end":{"line":30,"column":43}},"11":{"start":{"line":31,"column":0},"end":{"line":31,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":18},"end":{"line":11,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":13},"end":{"line":14,"column":5}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":16},"end":{"line":17,"column":5}},"line":15}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":2,"8":2,"9":1,"10":1,"11":1},"f":{"0":1,"1":2,"2":2},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\services\\user.service.ts","sources":["D:\\mspr_ci\\src\\services\\user.service.ts"],"names":[],"mappings":";;;AAGA,iCAA8B;AAC9B,qCAAiE;AAEjE,IAAI,YAAY,GAAG,CAAC,CAAC;AAKrB,YAAY,GAAG,CAAC,CAAC;AAajB,MAAa,WAAW;IAAxB;QAEY,YAAO,GAAa,IAAI,eAAO,EAAE,CAAC;IAoB9C,CAAC;IAbU,MAAM;QACT,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;IACjC,CAAC;IAQM,OAAO,CAAC,EAAY;QACvB,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;IACpC,CAAC;CACJ;AAbG;IADC,kDAAwC,CAAC,MAAM,CAAC;;;;yCAGhD;AAQD;IADC,kDAAwC,CAAC,MAAM,CAAC;;;;0CAGhD;AArBL,kCAsBC","sourcesContent":["import {v4String} from 'uuid/interfaces';\r\nimport {IUser} from '@entities';\r\nimport {IUserDao} from '../daos/User/user.dao';\r\nimport {UserDao} from '@daos';\r\nimport {NameCallerArgsReturnLogServicesInfoLevel} from '@shared';\r\n\r\nlet IUserService = 1;\r\n/**\r\n * Interface for classes that represent an user service\r\n * @interface\r\n */\r\nIUserService = 1;\r\nexport interface IUserService {\r\n    getAll: () => Promise<IUser[]>;\r\n    getById: (id: v4String) => Promise<IUser | null>;\r\n}\r\n\r\n/**\r\n * Creates a new UserService\r\n * @classdesc Service called to get informations about usersss\r\n *\r\n * @class\r\n * @implements {IUserService}\r\n */\r\nexport class UserService implements IUserService {\r\n\r\n    private userDao: IUserDao = new UserDao();\r\n\r\n    /**\r\n     * Returns all users\r\n     * @returns {Promise<IUser[]>}\r\n     */\r\n    @NameCallerArgsReturnLogServicesInfoLevel('User')\r\n    public getAll(): Promise<IUser[]> {\r\n        return this.userDao.getAll();\r\n    }\r\n\r\n    /**\r\n     * Returns asked user\r\n     * @param {v4String} id\r\n     * @returns {Promise<IUser | null>}\r\n     */\r\n    @NameCallerArgsReturnLogServicesInfoLevel('User')\r\n    public getById(id: v4String): Promise<IUser | null> {\r\n        return this.userDao.getById(id);\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"345f4904f14e995124532bb12d281881d11dad36"},"D:\\mspr_ci\\src\\daos\\index.ts":{"path":"D:\\mspr_ci\\src\\daos\\index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":3,"column":65}},"2":{"start":{"line":4,"column":18},"end":{"line":4,"column":35}},"3":{"start":{"line":5,"column":22},"end":{"line":5,"column":47}},"4":{"start":{"line":6,"column":0},"end":{"line":9,"column":1}},"5":{"start":{"line":7,"column":4},"end":{"line":7,"column":27}},"6":{"start":{"line":8,"column":4},"end":{"line":8,"column":31}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":47}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":59}}},"fnMap":{},"branchMap":{"0":{"loc":{"start":{"line":3,"column":21},"end":{"line":3,"column":50}},"type":"binary-expr","locations":[{"start":{"line":3,"column":21},"end":{"line":3,"column":44}},{"start":{"line":3,"column":48},"end":{"line":3,"column":50}}],"line":3},"1":{"loc":{"start":{"line":6,"column":0},"end":{"line":9,"column":1}},"type":"if","locations":[{"start":{"line":6,"column":0},"end":{"line":9,"column":1}},{"start":{"line":6,"column":0},"end":{"line":9,"column":1}}],"line":6}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{},"b":{"0":[1,0],"1":[1,0]},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\daos\\index.ts","sources":["D:\\mspr_ci\\src\\daos\\index.ts"],"names":[],"mappings":";;AAAA,MAAM,WAAW,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC,WAAW,EAAE,CAAC;AAClE,IAAI,WAAW,GAAG,iBAAiB,CAAC;AACpC,IAAI,eAAe,GAAG,yBAAyB,CAAC;AAEhD,IAAI,WAAW,KAAK,MAAM,EAAE;IACxB,WAAW,IAAI,OAAO,CAAC;IACvB,eAAe,IAAI,OAAO,CAAC;CAC9B;AAGD,+CAAgD;AAChD,2DAAwD","sourcesContent":["const usingMockDb = (process.env.USE_MOCK_DB || '').toLowerCase();\r\nlet userDaoPath = './User/user.dao';\r\nlet purchaseDaoPath = './Purchase/purchase.dao';\r\n\r\nif (usingMockDb === 'true') {\r\n    userDaoPath += '.mock';\r\n    purchaseDaoPath += '.mock';\r\n}\r\n\r\n// tslint:disable:no-var-requires\r\nexport const { UserDao } = require(userDaoPath);\r\nexport const { PurchaseDao } = require(purchaseDaoPath);\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"923860d43695b7af414ebf5bd79356a22346a0dc"},"D:\\mspr_ci\\src\\daos\\User\\user.dao.mock.ts":{"path":"D:\\mspr_ci\\src\\daos\\User\\user.dao.mock.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":23},"end":{"line":4,"column":56}},"3":{"start":{"line":5,"column":18},"end":{"line":5,"column":36}},"4":{"start":{"line":8,"column":23},"end":{"line":10,"column":10}},"5":{"start":{"line":9,"column":33},"end":{"line":9,"column":45}},"6":{"start":{"line":11,"column":8},"end":{"line":20,"column":11}},"7":{"start":{"line":12,"column":12},"end":{"line":19,"column":13}},"8":{"start":{"line":13,"column":27},"end":{"line":13,"column":57}},"9":{"start":{"line":14,"column":16},"end":{"line":14,"column":32}},"10":{"start":{"line":17,"column":16},"end":{"line":17,"column":54}},"11":{"start":{"line":18,"column":16},"end":{"line":18,"column":26}},"12":{"start":{"line":23,"column":23},"end":{"line":25,"column":10}},"13":{"start":{"line":24,"column":33},"end":{"line":24,"column":45}},"14":{"start":{"line":26,"column":8},"end":{"line":38,"column":11}},"15":{"start":{"line":27,"column":12},"end":{"line":37,"column":13}},"16":{"start":{"line":28,"column":27},"end":{"line":28,"column":57}},"17":{"start":{"line":29,"column":16},"end":{"line":31,"column":17}},"18":{"start":{"line":30,"column":20},"end":{"line":30,"column":32}},"19":{"start":{"line":32,"column":16},"end":{"line":32,"column":65}},"20":{"start":{"line":32,"column":49},"end":{"line":32,"column":63}},"21":{"start":{"line":35,"column":16},"end":{"line":35,"column":54}},"22":{"start":{"line":36,"column":16},"end":{"line":36,"column":26}},"23":{"start":{"line":41,"column":0},"end":{"line":46,"column":38}},"24":{"start":{"line":47,"column":0},"end":{"line":52,"column":39}},"25":{"start":{"line":53,"column":0},"end":{"line":53,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":13},"end":{"line":21,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":27},"end":{"line":9,"column":28}},"loc":{"start":{"line":9,"column":33},"end":{"line":9,"column":45}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":11,"column":55},"end":{"line":11,"column":56}},"loc":{"start":{"line":11,"column":68},"end":{"line":20,"column":9}},"line":11},"3":{"name":"(anonymous_3)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":16},"end":{"line":39,"column":5}},"line":22},"4":{"name":"(anonymous_4)","decl":{"start":{"line":24,"column":27},"end":{"line":24,"column":28}},"loc":{"start":{"line":24,"column":33},"end":{"line":24,"column":45}},"line":24},"5":{"name":"(anonymous_5)","decl":{"start":{"line":26,"column":55},"end":{"line":26,"column":56}},"loc":{"start":{"line":26,"column":68},"end":{"line":38,"column":9}},"line":26},"6":{"name":"(anonymous_6)","decl":{"start":{"line":32,"column":39},"end":{"line":32,"column":40}},"loc":{"start":{"line":32,"column":49},"end":{"line":32,"column":63}},"line":32}},"branchMap":{"0":{"loc":{"start":{"line":29,"column":16},"end":{"line":31,"column":17}},"type":"if","locations":[{"start":{"line":29,"column":16},"end":{"line":31,"column":17}},{"start":{"line":29,"column":16},"end":{"line":31,"column":17}}],"line":29},"1":{"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":65}},"type":"binary-expr","locations":[{"start":{"line":29,"column":20},"end":{"line":29,"column":42}},{"start":{"line":29,"column":46},"end":{"line":29,"column":65}}],"line":29}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":0,"23":1,"24":1,"25":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0},"b":{"0":[1,0],"1":[1,0]},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\daos\\User\\user.dao.mock.ts","sources":["D:\\mspr_ci\\src\\daos\\User\\user.dao.mock.ts"],"names":[],"mappings":";;;AAAA,yDAAqD;AAGrD,qCAA+E;AAG/E,MAAa,OAAQ,SAAQ,0BAAW;IAGvB,MAAM;;;;;YACf,IAAI;gBACA,MAAM,EAAE,GAAG,MAAM,OAAM,MAAM,WAAE,CAAC;gBAChC,OAAO,EAAE,CAAC,KAAK,CAAC;aACnB;YAAC,OAAO,GAAG,EAAE;gBACV,0BAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBAC5B,MAAM,GAAG,CAAC;aACb;QACL,CAAC;KAAA;IAIY,OAAO,CAAC,EAAY;;;;;YAC7B,IAAI;gBACA,MAAM,EAAE,GAAG,MAAM,OAAM,MAAM,WAAE,CAAC;gBAChC,IAAI,EAAE,CAAC,KAAK,KAAK,SAAS,IAAI,EAAE,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;oBAC/C,OAAO,IAAI,CAAC;iBACf;gBACD,OAAO,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAW,EAAE,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;aAC3D;YAAC,OAAO,GAAG,EAAE;gBACV,0BAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBAC5B,MAAM,GAAG,CAAC;aACb;QACL,CAAC;KAAA;CACJ;AAxBG;IADC,8CAAoC,CAAC,MAAM,CAAC;;;;qCAS5C;AAID;IADC,8CAAoC,CAAC,MAAM,CAAC;;;;sCAY5C;AA1BL,0BA2BC","sourcesContent":["import { MockDaoMock } from '../MockDb/MockDao.mock';\r\nimport { IUserDao } from './user.dao';\r\nimport {IUser} from '@entities';\r\nimport {globalInfoLogger, NameCallerArgsReturnLogDaosInfoLevel} from '@shared';\r\nimport {v4String} from 'uuid/interfaces';\r\n\r\nexport class UserDao extends MockDaoMock implements IUserDao {\r\n\r\n    @NameCallerArgsReturnLogDaosInfoLevel('User')\r\n    public async getAll(): Promise<IUser[]> {\r\n        try {\r\n            const db = await super.openDb();\r\n            return db.users;\r\n        } catch (err) {\r\n            globalInfoLogger.error(err);\r\n            throw err;\r\n        }\r\n    }\r\n\r\n\r\n    @NameCallerArgsReturnLogDaosInfoLevel('User')\r\n    public async getById(id: v4String): Promise<IUser | null> {\r\n        try {\r\n            const db = await super.openDb();\r\n            if (db.users === undefined || db.users.length < 0) {\r\n                return null;\r\n            }\r\n            return db.users.filter((user: IUser) => user.id === id);\r\n        } catch (err) {\r\n            globalInfoLogger.error(err);\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6723861bd5ae884f6ed4dbd48d6831ea0fa6a632"},"D:\\mspr_ci\\src\\daos\\MockDb\\MockDao.mock.ts":{"path":"D:\\mspr_ci\\src\\daos\\MockDb\\MockDao.mock.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":19},"end":{"line":4,"column":63}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":56}},"4":{"start":{"line":10,"column":8},"end":{"line":10,"column":60}},"5":{"start":{"line":13,"column":8},"end":{"line":13,"column":65}},"6":{"start":{"line":16,"column":0},"end":{"line":16,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":18},"end":{"line":8,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":13},"end":{"line":11,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":15},"end":{"line":14,"column":5}},"line":12}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":3,"4":2,"5":0,"6":1},"f":{"0":3,"1":2,"2":0},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\daos\\MockDb\\MockDao.mock.ts","sources":["D:\\mspr_ci\\src\\daos\\MockDb\\MockDao.mock.ts"],"names":[],"mappings":";;;AAAA,gEAAgC;AAEhC,MAAa,WAAW;IAAxB;QAEqB,eAAU,GAAG,6BAA6B,CAAC;IAShE,CAAC;IAPa,MAAM;QACZ,OAAO,kBAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAC9C,CAAC;IAES,MAAM,CAAC,EAAO;QACpB,OAAO,kBAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;IACnD,CAAC;CACJ;AAXD,kCAWC","sourcesContent":["import jsonfile from 'jsonfile';\r\n\r\nexport class MockDaoMock {\r\n\r\n    private readonly dbFilePath = 'src/daos/MockDb/MockDb.json';\r\n\r\n    protected openDb(): Promise<any> {\r\n        return jsonfile.readFile(this.dbFilePath);\r\n    }\r\n\r\n    protected saveDb(db: any): Promise<any> {\r\n        return jsonfile.writeFile(this.dbFilePath, db);\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"020c57dc02b7a7c24e99087b49549b13bde5f2bf"},"D:\\mspr_ci\\src\\daos\\Purchase\\purchase.dao.mock.ts":{"path":"D:\\mspr_ci\\src\\daos\\Purchase\\purchase.dao.mock.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":23},"end":{"line":4,"column":56}},"3":{"start":{"line":5,"column":18},"end":{"line":5,"column":36}},"4":{"start":{"line":8,"column":23},"end":{"line":10,"column":10}},"5":{"start":{"line":9,"column":33},"end":{"line":9,"column":45}},"6":{"start":{"line":11,"column":8},"end":{"line":20,"column":11}},"7":{"start":{"line":12,"column":12},"end":{"line":19,"column":13}},"8":{"start":{"line":13,"column":27},"end":{"line":13,"column":57}},"9":{"start":{"line":14,"column":16},"end":{"line":14,"column":32}},"10":{"start":{"line":17,"column":16},"end":{"line":17,"column":54}},"11":{"start":{"line":18,"column":16},"end":{"line":18,"column":26}},"12":{"start":{"line":23,"column":23},"end":{"line":25,"column":10}},"13":{"start":{"line":24,"column":33},"end":{"line":24,"column":45}},"14":{"start":{"line":26,"column":8},"end":{"line":35,"column":11}},"15":{"start":{"line":27,"column":12},"end":{"line":34,"column":13}},"16":{"start":{"line":28,"column":27},"end":{"line":28,"column":57}},"17":{"start":{"line":29,"column":16},"end":{"line":29,"column":32}},"18":{"start":{"line":32,"column":16},"end":{"line":32,"column":54}},"19":{"start":{"line":33,"column":16},"end":{"line":33,"column":26}},"20":{"start":{"line":38,"column":0},"end":{"line":43,"column":42}},"21":{"start":{"line":44,"column":0},"end":{"line":49,"column":47}},"22":{"start":{"line":50,"column":0},"end":{"line":50,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":13},"end":{"line":21,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":27},"end":{"line":9,"column":28}},"loc":{"start":{"line":9,"column":33},"end":{"line":9,"column":45}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":11,"column":55},"end":{"line":11,"column":56}},"loc":{"start":{"line":11,"column":68},"end":{"line":20,"column":9}},"line":11},"3":{"name":"(anonymous_3)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":24},"end":{"line":36,"column":5}},"line":22},"4":{"name":"(anonymous_4)","decl":{"start":{"line":24,"column":27},"end":{"line":24,"column":28}},"loc":{"start":{"line":24,"column":33},"end":{"line":24,"column":45}},"line":24},"5":{"name":"(anonymous_5)","decl":{"start":{"line":26,"column":55},"end":{"line":26,"column":56}},"loc":{"start":{"line":26,"column":68},"end":{"line":35,"column":9}},"line":26}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":1,"22":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\daos\\Purchase\\purchase.dao.mock.ts","sources":["D:\\mspr_ci\\src\\daos\\Purchase\\purchase.dao.mock.ts"],"names":[],"mappings":";;;AAAA,yDAAqD;AAIrD,qCAA+E;AAE/E,MAAa,WAAY,SAAQ,0BAAW;IAG3B,MAAM;;;;;YACf,IAAI;gBACA,MAAM,EAAE,GAAG,MAAM,OAAM,MAAM,WAAE,CAAC;gBAChC,OAAO,EAAE,CAAC,KAAK,CAAC;aACnB;YAAC,OAAO,GAAG,EAAE;gBACV,0BAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBAC5B,MAAM,GAAG,CAAC;aACb;QACL,CAAC;KAAA;IAGY,WAAW,CAAC,MAAgB;;;;;YACrC,IAAI;gBACA,MAAM,EAAE,GAAG,MAAM,OAAM,MAAM,WAAE,CAAC;gBAChC,OAAO,EAAE,CAAC,KAAK,CAAC;aACnB;YAAC,OAAO,GAAG,EAAE;gBACV,0BAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBAC5B,MAAM,GAAG,CAAC;aACb;QACL,CAAC;KAAA;CACJ;AApBG;IADC,8CAAoC,CAAC,UAAU,CAAC;;;;yCAShD;AAGD;IADC,8CAAoC,CAAC,UAAU,CAAC;;;;8CAShD;AAtBL,kCAuBC","sourcesContent":["import { MockDaoMock } from '../MockDb/MockDao.mock';\r\nimport {v4String} from 'uuid/interfaces';\r\nimport {IPurchase} from '@entities';\r\nimport {IPurchaseDao} from './purchase.dao';\r\nimport {globalInfoLogger, NameCallerArgsReturnLogDaosInfoLevel} from '@shared';\r\n\r\nexport class PurchaseDao extends MockDaoMock implements IPurchaseDao {\r\n\r\n    @NameCallerArgsReturnLogDaosInfoLevel('Purchase')\r\n    public async getAll(): Promise<IPurchase[]> {\r\n        try {\r\n            const db = await super.openDb();\r\n            return db.users;\r\n        } catch (err) {\r\n            globalInfoLogger.error(err);\r\n            throw err;\r\n        }\r\n    }\r\n\r\n    @NameCallerArgsReturnLogDaosInfoLevel('Purchase')\r\n    public async getByUserId(userId: v4String): Promise<IPurchase[]> {\r\n        try {\r\n            const db = await super.openDb();\r\n            return db.users;\r\n        } catch (err) {\r\n            globalInfoLogger.error(err);\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"dfdea819ff69d6f2359cbf92c7fbcfda888a50f7"},"D:\\mspr_ci\\src\\controllers\\purchase.controller.ts":{"path":"D:\\mspr_ci\\src\\controllers\\purchase.controller.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":29},"end":{"line":4,"column":58}},"3":{"start":{"line":5,"column":34},"end":{"line":5,"column":68}},"4":{"start":{"line":6,"column":16},"end":{"line":6,"column":56}},"5":{"start":{"line":7,"column":28},"end":{"line":7,"column":56}},"6":{"start":{"line":8,"column":18},"end":{"line":8,"column":36}},"7":{"start":{"line":9,"column":27},"end":{"line":9,"column":66}},"8":{"start":{"line":10,"column":20},"end":{"line":10,"column":40}},"9":{"start":{"line":11,"column":25},"end":{"line":30,"column":1}},"10":{"start":{"line":13,"column":8},"end":{"line":13,"column":72}},"11":{"start":{"line":16,"column":8},"end":{"line":28,"column":11}},"12":{"start":{"line":17,"column":27},"end":{"line":17,"column":41}},"13":{"start":{"line":18,"column":12},"end":{"line":27,"column":13}},"14":{"start":{"line":19,"column":34},"end":{"line":19,"column":76}},"15":{"start":{"line":20,"column":16},"end":{"line":20,"column":83}},"16":{"start":{"line":23,"column":16},"end":{"line":23,"column":67}},"17":{"start":{"line":24,"column":16},"end":{"line":26,"column":19}},"18":{"start":{"line":31,"column":0},"end":{"line":31,"column":54}},"19":{"start":{"line":32,"column":0},"end":{"line":53,"column":54}},"20":{"start":{"line":54,"column":0},"end":{"line":61,"column":23}},"21":{"start":{"line":62,"column":0},"end":{"line":62,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":18},"end":{"line":14,"column":5}},"line":12},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":41},"end":{"line":29,"column":5}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":16,"column":55},"end":{"line":16,"column":56}},"loc":{"start":{"line":16,"column":68},"end":{"line":28,"column":9}},"line":16}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":2,"12":2,"13":2,"14":2,"15":2,"16":0,"17":0,"18":1,"19":1,"20":1,"21":1},"f":{"0":1,"1":2,"2":2},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\controllers\\purchase.controller.ts","sources":["D:\\mspr_ci\\src\\controllers\\purchase.controller.ts"],"names":[],"mappings":";;;AAAA,2DAI4B;AAC5B,qEAAwE;AAExE,yDAAmC;AACnC,yDAAgD;AAChD,qCAAsF;AACtF,mEAA+E;AAC/E,yCAAqC;AAkBrC,IAAa,kBAAkB,GAA/B,MAAa,kBAAkB;IAA/B;QAEY,oBAAe,GAAqB,IAAI,kCAAe,EAAE,CAAC;IAqCtE,CAAC;IAhBgB,WAAW,CACpB,OAAwB,EACxB,QAA0B,EAC1B,IAA0B;;YAE1B,MAAM,EAAC,EAAE,EAAC,GAAG,OAAO,CAAC,MAAM,CAAC;YAC5B,IAAI;gBACA,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,EAAyB,CAAC,CAAC;gBACpF,OAAO,QAAQ,CAAC,MAAM,CAAC,sBAAE,CAAC,CAAC,IAAI,CAAC,EAAC,SAAS,EAAC,CAAC,CAAC;aAChD;YAAC,OAAO,GAAG,EAAE;gBACV,0BAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;gBACzC,OAAO,QAAQ,CAAC,MAAM,CAAC,6BAAS,CAAC,CAAC,IAAI,CAAC;oBACnC,KAAK,EAAE,GAAG,CAAC,OAAO;iBACrB,CAAC,CAAC;aACN;QACL,CAAC;KAAA;CACJ,CAAA;AAnCiB,8BAAW,GAAG,oBAAoB,CAAC;AAmBjD;IAjBC,qDAA2C,CAAC,UAAU,CAAC;IACvD,oCAAe,CAAC;QACb,WAAW,EAAE,0BAA0B;QACvC,OAAO,EAAE,mCAAmC;QAC5C,IAAI,EAAE,YAAY;QAClB,SAAS,EAAE;YACP,GAAG,EAAE;gBACD,WAAW,EAAE,SAAS;gBACtB,IAAI,EAAE,8CAAyB,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK;gBACnD,KAAK,EAAE,aAAa;aACvB;YACD,GAAG,EAAE;gBACD,WAAW,EAAE,aAAa;aAC7B;SACJ;KACJ,CAAC;IACD,iCAAO,CAAC,WAAW,CAAC;;;;qDAgBpB;AAtCQ,kBAAkB;IAR9B,4BAAO,CAAC;QACL,IAAI,EAAE,YAAY;QAClB,IAAI,EAAE,UAAU;KACnB,CAAC;IACD,oCAAU,CACP,YAAY,CACf;IACA,sBAAU,EAAE;GACA,kBAAkB,CAuC9B;AAvCY,gDAAkB","sourcesContent":["import {\r\n    ApiOperationGet,\r\n    ApiPath,\r\n    SwaggerDefinitionConstant,\r\n} from 'swagger-express-ts';\r\nimport {controller, httpGet, interfaces} from 'inversify-express-utils';\r\nimport {v4String} from 'uuid/interfaces';\r\nimport * as express from 'express';\r\nimport {NOT_FOUND, OK} from 'http-status-codes';\r\nimport {globalInfoLogger, NameCallerArgsReturnLogControllersInfoLevel} from '@shared';\r\nimport {IPurchaseService, PurchaseService} from '../services/purchase.service';\r\nimport {injectable} from 'inversify';\r\n\r\ninterface IPurchaseController {\r\n    getByUserId: (\r\n        request: express.Request,\r\n        response: express.Response,\r\n        next: express.NextFunction,\r\n    ) => Promise<express.Response>;\r\n}\r\n\r\n@ApiPath({\r\n    path: '/purchases',\r\n    name: 'Purchase',\r\n})\r\n@controller(\r\n    '/purchases',\r\n)\r\n@injectable()\r\nexport class PurchaseController implements interfaces.Controller, IPurchaseController {\r\n\r\n    private purchaseService: IPurchaseService = new PurchaseService();\r\n\r\n    public static TARGET_NAME = 'PurchaseController';\r\n\r\n    @NameCallerArgsReturnLogControllersInfoLevel('Purchase')\r\n    @ApiOperationGet({\r\n        description: 'Get purchases by user id',\r\n        summary: 'Get purchases of an existing user',\r\n        path: '/user/{id}',\r\n        responses: {\r\n            200: {\r\n                description: 'Success',\r\n                type: SwaggerDefinitionConstant.Response.Type.ARRAY,\r\n                model: 'PurchaseDTO',\r\n            },\r\n            400: {\r\n                description: 'Bad request',\r\n            },\r\n        },\r\n    })\r\n    @httpGet('/user/:id')\r\n    public async getByUserId(\r\n        request: express.Request,\r\n        response: express.Response,\r\n        next: express.NextFunction,\r\n    ): Promise<express.Response> {\r\n        const {id} = request.params;\r\n        try {\r\n            const purchases = await this.purchaseService.getByUserId(id as unknown as v4String);\r\n            return response.status(OK).json({purchases});\r\n        } catch (err) {\r\n            globalInfoLogger.error(err.message, err);\r\n            return response.status(NOT_FOUND).json({\r\n                error: err.message,\r\n            });\r\n        }\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2f6f1552d9d0a9583daabee340b80e267007f6d4"},"D:\\mspr_ci\\src\\services\\purchase.service.ts":{"path":"D:\\mspr_ci\\src\\services\\purchase.service.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":32}},"3":{"start":{"line":5,"column":18},"end":{"line":5,"column":36}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":24}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":21}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":53}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":48}},"8":{"start":{"line":16,"column":0},"end":{"line":21,"column":51}},"9":{"start":{"line":22,"column":0},"end":{"line":22,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":18},"end":{"line":11,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":20},"end":{"line":14,"column":5}},"line":12}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{"0":1,"1":1},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\services\\purchase.service.ts","sources":["D:\\mspr_ci\\src\\services\\purchase.service.ts"],"names":[],"mappings":";;;AAEA,iCAAkC;AAElC,qCAAiE;AAEjE,IAAI,gBAAgB,GAAG,CAAC,CAAC;AAKzB,gBAAgB,GAAG,CAAC,CAAC;AAYrB,MAAa,eAAe;IAA5B;QAEY,gBAAW,GAAiB,IAAI,mBAAW,EAAE,CAAC;IAW1D,CAAC;IAHU,WAAW,CAAC,EAAY;QAC3B,OAAO,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;IAC5C,CAAC;CACJ;AAHG;IADC,kDAAwC,CAAC,UAAU,CAAC;;;;kDAGpD;AAZL,0CAaC","sourcesContent":["import {v4String} from 'uuid/interfaces';\r\nimport {IPurchase} from '@entities';\r\nimport {PurchaseDao} from '@daos';\r\nimport {IPurchaseDao} from '../daos/Purchase/purchase.dao';\r\nimport {NameCallerArgsReturnLogServicesInfoLevel} from '@shared';\r\n\r\nlet IPurchaseService = 1;\r\n/**\r\n * Interface for classes that represent a purchase service\r\n * @interface\r\n */\r\nIPurchaseService = 1;\r\nexport interface IPurchaseService {\r\n    getByUserId: (id: v4String) => Promise<IPurchase[]>;\r\n}\r\n\r\n/**\r\n * Creates a new PurchaseService\r\n *\r\n * @classdesc Service called to get informations about purchases\r\n * @class\r\n * @implements {IPurchaseService}\r\n */\r\nexport class PurchaseService implements IPurchaseService {\r\n\r\n    private purchaseDao: IPurchaseDao = new PurchaseDao();\r\n\r\n    /**\r\n     * Returns purchases of the user\r\n     * @param {v4String} id\r\n     * @returns {Promise<IPurchase[]>}\r\n     */\r\n    @NameCallerArgsReturnLogServicesInfoLevel('Purchase')\r\n    public getByUserId(id: v4String): Promise<IPurchase[]> {\r\n        return this.purchaseDao.getByUserId(id);\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"38cb2a8b31e972c26391a5e687c1b1494b76fe38"},"D:\\mspr_ci\\src\\controllers\\company.controller.ts":{"path":"D:\\mspr_ci\\src\\controllers\\company.controller.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":29},"end":{"line":4,"column":58}},"3":{"start":{"line":5,"column":34},"end":{"line":5,"column":68}},"4":{"start":{"line":6,"column":16},"end":{"line":6,"column":56}},"5":{"start":{"line":7,"column":28},"end":{"line":7,"column":56}},"6":{"start":{"line":8,"column":18},"end":{"line":8,"column":36}},"7":{"start":{"line":9,"column":26},"end":{"line":9,"column":64}},"8":{"start":{"line":10,"column":20},"end":{"line":10,"column":40}},"9":{"start":{"line":11,"column":24},"end":{"line":29,"column":1}},"10":{"start":{"line":13,"column":8},"end":{"line":13,"column":69}},"11":{"start":{"line":16,"column":8},"end":{"line":27,"column":11}},"12":{"start":{"line":17,"column":12},"end":{"line":26,"column":13}},"13":{"start":{"line":18,"column":37},"end":{"line":18,"column":80}},"14":{"start":{"line":19,"column":16},"end":{"line":19,"column":86}},"15":{"start":{"line":22,"column":16},"end":{"line":22,"column":67}},"16":{"start":{"line":23,"column":16},"end":{"line":25,"column":19}},"17":{"start":{"line":30,"column":0},"end":{"line":30,"column":52}},"18":{"start":{"line":31,"column":0},"end":{"line":51,"column":57}},"19":{"start":{"line":52,"column":0},"end":{"line":59,"column":22}},"20":{"start":{"line":60,"column":0},"end":{"line":60,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":18},"end":{"line":14,"column":5}},"line":12},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":45},"end":{"line":28,"column":5}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":16,"column":55},"end":{"line":16,"column":56}},"loc":{"start":{"line":16,"column":68},"end":{"line":27,"column":9}},"line":16}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":3,"12":3,"13":3,"14":3,"15":0,"16":0,"17":1,"18":1,"19":1,"20":1},"f":{"0":1,"1":3,"2":3},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\controllers\\company.controller.ts","sources":["D:\\mspr_ci\\src\\controllers\\company.controller.ts"],"names":[],"mappings":";;;AAAA,2DAG4B;AAC5B,qEAAwE;AACxE,yDAAmC;AACnC,yDAAgD;AAChD,qCAAsF;AACtF,iEAA4E;AAC5E,yCAAqC;AAkBrC,IAAa,iBAAiB,GAA9B,MAAa,iBAAiB;IAA9B;QAEY,mBAAc,GAAoB,IAAI,gCAAc,EAAE,CAAC;IAmCnE,CAAC;IAfgB,eAAe,CACxB,OAAwB,EACxB,QAA0B,EAC1B,IAA0B;;YAE1B,IAAI;gBACA,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,eAAe,EAAE,CAAC;gBACjE,OAAO,QAAQ,CAAC,MAAM,CAAC,sBAAE,CAAC,CAAC,IAAI,CAAC,EAAC,YAAY,EAAC,CAAC,CAAC;aACnD;YAAC,OAAO,GAAG,EAAE;gBACV,0BAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;gBACzC,OAAO,QAAQ,CAAC,MAAM,CAAC,6BAAS,CAAC,CAAC,IAAI,CAAC;oBACnC,KAAK,EAAE,GAAG,CAAC,OAAO;iBACrB,CAAC,CAAC;aACN;QACL,CAAC;KAAA;CACJ,CAAA;AAjCiB,6BAAW,GAAG,mBAAmB,CAAC;AAkBhD;IAhBC,qDAA2C,CAAC,SAAS,CAAC;IACtD,oCAAe,CAAC;QACb,WAAW,EAAE,kCAAkC;QAC/C,OAAO,EAAE,kCAAkC;QAC3C,IAAI,EAAE,eAAe;QACrB,SAAS,EAAE;YACP,GAAG,EAAE;gBACD,WAAW,EAAE,SAAS;gBACtB,KAAK,EAAE,cAAc;aACxB;YACD,GAAG,EAAE;gBACD,WAAW,EAAE,aAAa;aAC7B;SACJ;KACJ,CAAC;IACD,iCAAO,CAAC,eAAe,CAAC;;;;wDAexB;AApCQ,iBAAiB;IAR7B,4BAAO,CAAC;QACL,IAAI,EAAE,UAAU;QAChB,IAAI,EAAE,SAAS;KAClB,CAAC;IACD,oCAAU,CACP,UAAU,CACb;IACA,sBAAU,EAAE;GACA,iBAAiB,CAqC7B;AArCY,8CAAiB","sourcesContent":["import {\r\n    ApiOperationGet,\r\n    ApiPath,\r\n} from 'swagger-express-ts';\r\nimport {controller, httpGet, interfaces} from 'inversify-express-utils';\r\nimport * as express from 'express';\r\nimport {NOT_FOUND, OK} from 'http-status-codes';\r\nimport {globalInfoLogger, NameCallerArgsReturnLogControllersInfoLevel} from '@shared';\r\nimport {CompanyService, ICompanyService} from '../services/company.service';\r\nimport {injectable} from 'inversify';\r\n\r\ninterface ICompanyController {\r\n    getTotalRevenue: (\r\n        request: express.Request,\r\n        response: express.Response,\r\n        next: express.NextFunction,\r\n    ) => Promise<express.Response>;\r\n}\r\n\r\n@ApiPath({\r\n    path: '/company',\r\n    name: 'Company',\r\n})\r\n@controller(\r\n    '/company',\r\n)\r\n@injectable()\r\nexport class CompanyController implements interfaces.Controller, ICompanyController {\r\n\r\n    private companyService: ICompanyService = new CompanyService();\r\n\r\n    public static TARGET_NAME = 'CompanyController';\r\n\r\n    @NameCallerArgsReturnLogControllersInfoLevel('Company')\r\n    @ApiOperationGet({\r\n        description: 'Get total revenue of the company',\r\n        summary: 'Get total revenue of the company',\r\n        path: '/totalRevenue',\r\n        responses: {\r\n            200: {\r\n                description: 'Success',\r\n                model: 'TotalRevenue',\r\n            },\r\n            400: {\r\n                description: 'Bad request',\r\n            },\r\n        },\r\n    })\r\n    @httpGet('/totalRevenue')\r\n    public async getTotalRevenue(\r\n        request: express.Request,\r\n        response: express.Response,\r\n        next: express.NextFunction,\r\n    ): Promise<express.Response> {\r\n        try {\r\n            const totalRevenue = await this.companyService.getTotalRevenue();\r\n            return response.status(OK).json({totalRevenue});\r\n        } catch (err) {\r\n            globalInfoLogger.error(err.message, err);\r\n            return response.status(NOT_FOUND).json({\r\n                error: err.message,\r\n            });\r\n        }\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b9972fd3e61d53592e3c7ca40b424040b2f9e289"},"D:\\mspr_ci\\src\\services\\company.service.ts":{"path":"D:\\mspr_ci\\src\\services\\company.service.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":32}},"3":{"start":{"line":5,"column":18},"end":{"line":5,"column":36}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":56}},"5":{"start":{"line":7,"column":22},"end":{"line":7,"column":23}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":20}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":53}},"8":{"start":{"line":14,"column":8},"end":{"line":21,"column":11}},"9":{"start":{"line":15,"column":31},"end":{"line":15,"column":32}},"10":{"start":{"line":16,"column":30},"end":{"line":16,"column":61}},"11":{"start":{"line":17,"column":12},"end":{"line":19,"column":15}},"12":{"start":{"line":18,"column":16},"end":{"line":18,"column":55}},"13":{"start":{"line":20,"column":12},"end":{"line":20,"column":61}},"14":{"start":{"line":24,"column":0},"end":{"line":29,"column":54}},"15":{"start":{"line":30,"column":0},"end":{"line":30,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":18},"end":{"line":12,"column":5}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":22},"end":{"line":22,"column":5}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":55},"end":{"line":14,"column":56}},"loc":{"start":{"line":14,"column":68},"end":{"line":21,"column":9}},"line":14},"3":{"name":"(anonymous_3)","decl":{"start":{"line":17,"column":30},"end":{"line":17,"column":31}},"loc":{"start":{"line":17,"column":44},"end":{"line":19,"column":13}},"line":17}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":2,"9":2,"10":2,"11":2,"12":4,"13":2,"14":1,"15":1},"f":{"0":1,"1":2,"2":2,"3":4},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\services\\company.service.ts","sources":["D:\\mspr_ci\\src\\services\\company.service.ts"],"names":[],"mappings":";;;AAAA,iCAAkC;AAClC,qCAAiE;AAGjE,yDAAoD;AAEpD,IAAI,eAAe,GAAG,CAAC,CAAC;AAOxB,eAAe,GAAG,CAAC,CAAC;AAapB,MAAa,cAAc;IAA3B;QAOY,gBAAW,GAAiB,IAAI,mBAAW,EAAE,CAAC;IAgB1D,CAAC;IARgB,eAAe;;YACxB,IAAI,YAAY,GAAW,CAAC,CAAC;YAC7B,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;YAClD,SAAS,CAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,EAAE;gBAC3B,YAAY,IAAI,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC;YAC3C,CAAC,CAAC,CAAC;YACH,OAAO,2BAAY,CAAC,YAAY,CAAC,CAAC;QACtC,CAAC;KAAA;CACJ;AARG;IANC,kDAAwC,CAAC,SAAS,CAAC;;;;qDAanD;AAtBL,wCAuBC","sourcesContent":["import {PurchaseDao} from '@daos';\r\nimport {NameCallerArgsReturnLogServicesInfoLevel} from '@shared';\r\nimport {TotalRevenue} from '../entities/total-revenue.entity';\r\nimport {IPurchaseDao} from '../daos/Purchase/purchase.dao';\r\nimport {calculateTax} from '../shared/CalculateTax';\r\n\r\nlet ICompanyService = 1;\r\n/**\r\n * Interface for classes that represent a company service\r\n * @todo add for differents companies\r\n * @since 1.0.1\r\n * @interface\r\n */\r\nICompanyService = 1;\r\nexport interface ICompanyService {\r\n    getTotalRevenue: () => Promise<TotalRevenue>;\r\n}\r\n\r\n/**\r\n * Creates a new CompanyService\r\n *\r\n * @classdesc Service called to get informations about companies\r\n * @class\r\n * @since 1.0.1\r\n * @implements {ICompanyService}\r\n */\r\nexport class CompanyService implements ICompanyService {\r\n\r\n    /**\r\n     * Member which ask the database\r\n     * @type IPurchaseDao\r\n     * @private\r\n     */\r\n    private purchaseDao: IPurchaseDao = new PurchaseDao();\r\n\r\n    @NameCallerArgsReturnLogServicesInfoLevel('Company')\r\n    /**\r\n     * Returns the total revenue of my company\r\n     * @function\r\n     * @returns {Promise<TotalRevenue>}\r\n     */\r\n    public async getTotalRevenue(): Promise<TotalRevenue> {\r\n        let excludingTax: number = 0;\r\n        const purchases = await this.purchaseDao.getAll();\r\n        purchases.forEach((purchase) => {\r\n            excludingTax += purchase.product.price;\r\n        });\r\n        return calculateTax(excludingTax);\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0926f2c0957ef31fa996d9bba861f4c19292eed5"},"D:\\mspr_ci\\src\\shared\\CalculateTax.ts":{"path":"D:\\mspr_ci\\src\\shared\\CalculateTax.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":3,"column":40}},"2":{"start":{"line":4,"column":0},"end":{"line":9,"column":2}},"3":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"4":{"start":{"line":6,"column":8},"end":{"line":6,"column":58}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":113}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":23},"end":{"line":4,"column":24}},"loc":{"start":{"line":4,"column":46},"end":{"line":9,"column":1}},"line":4}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5}},"s":{"0":1,"1":1,"2":1,"3":4,"4":1,"5":3},"f":{"0":4},"b":{"0":[1,3]},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\src\\shared\\CalculateTax.ts","sources":["D:\\mspr_ci\\src\\shared\\CalculateTax.ts"],"names":[],"mappings":";;AAAA,yCAAsD;AAEzC,QAAA,YAAY,GAAG,CAAC,iBAAyB,EAAiB,EAAE;IACrE,IAAI,iBAAiB,GAAG,CAAC,EAAG;QACxB,MAAM,IAAI,KAAK,CAAC,gCAAgC,CAAC,CAAC;KACrD;IACD,OAAO,IAAI,wBAAY,CAAC,iBAAiB,EAAE,iBAAiB,GAAG,CAAC,CAAC,EAAE,GAAG,iBAAiB,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AACrG,CAAC,CAAC","sourcesContent":["import {ITotalRevenue, TotalRevenue} from '@entities';\r\n\r\nexport const calculateTax = (excludingTaxPrice: number): ITotalRevenue => {\r\n    if (excludingTaxPrice < 0 ) {\r\n        throw new Error(\"Excluding Tax Price is under 0\");\r\n    }\r\n    return new TotalRevenue(excludingTaxPrice, excludingTaxPrice + ((20 * excludingTaxPrice) / 100));\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"046a829ce19e342c3fee6a9788412d677053b86a"},"D:\\mspr_ci\\spec\\purchase.spec.ts":{"path":"D:\\mspr_ci\\spec\\purchase.spec.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":20},"end":{"line":4,"column":65}},"3":{"start":{"line":5,"column":18},"end":{"line":5,"column":36}},"4":{"start":{"line":6,"column":28},"end":{"line":6,"column":56}},"5":{"start":{"line":7,"column":14},"end":{"line":7,"column":60}},"6":{"start":{"line":8,"column":27},"end":{"line":8,"column":70}},"7":{"start":{"line":9,"column":16},"end":{"line":9,"column":32}},"8":{"start":{"line":10,"column":16},"end":{"line":10,"column":29}},"9":{"start":{"line":11,"column":0},"end":{"line":77,"column":3}},"10":{"start":{"line":13,"column":4},"end":{"line":16,"column":7}},"11":{"start":{"line":14,"column":8},"end":{"line":14,"column":57}},"12":{"start":{"line":15,"column":8},"end":{"line":15,"column":15}},"13":{"start":{"line":17,"column":22},"end":{"line":42,"column":5}},"14":{"start":{"line":43,"column":4},"end":{"line":76,"column":7}},"15":{"start":{"line":44,"column":8},"end":{"line":51,"column":11}},"16":{"start":{"line":45,"column":12},"end":{"line":50,"column":15}},"17":{"start":{"line":47,"column":16},"end":{"line":47,"column":36}},"18":{"start":{"line":48,"column":16},"end":{"line":48,"column":71}},"19":{"start":{"line":49,"column":16},"end":{"line":49,"column":23}},"20":{"start":{"line":52,"column":8},"end":{"line":63,"column":11}},"21":{"start":{"line":53,"column":12},"end":{"line":53,"column":123}},"22":{"start":{"line":54,"column":12},"end":{"line":62,"column":15}},"23":{"start":{"line":56,"column":16},"end":{"line":56,"column":36}},"24":{"start":{"line":57,"column":16},"end":{"line":57,"column":64}},"25":{"start":{"line":58,"column":37},"end":{"line":58,"column":55}},"26":{"start":{"line":59,"column":16},"end":{"line":59,"column":56}},"27":{"start":{"line":60,"column":16},"end":{"line":60,"column":55}},"28":{"start":{"line":61,"column":16},"end":{"line":61,"column":23}},"29":{"start":{"line":64,"column":8},"end":{"line":75,"column":11}},"30":{"start":{"line":65,"column":12},"end":{"line":65,"column":108}},"31":{"start":{"line":66,"column":12},"end":{"line":74,"column":15}},"32":{"start":{"line":68,"column":16},"end":{"line":68,"column":36}},"33":{"start":{"line":69,"column":16},"end":{"line":69,"column":64}},"34":{"start":{"line":70,"column":37},"end":{"line":70,"column":55}},"35":{"start":{"line":71,"column":16},"end":{"line":71,"column":56}},"36":{"start":{"line":72,"column":16},"end":{"line":72,"column":55}},"37":{"start":{"line":73,"column":16},"end":{"line":73,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":11,"column":29},"end":{"line":11,"column":30}},"loc":{"start":{"line":11,"column":35},"end":{"line":77,"column":1}},"line":11},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":14},"end":{"line":13,"column":15}},"loc":{"start":{"line":13,"column":24},"end":{"line":16,"column":5}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":43,"column":31},"end":{"line":43,"column":32}},"loc":{"start":{"line":43,"column":37},"end":{"line":76,"column":5}},"line":43},"3":{"name":"(anonymous_3)","decl":{"start":{"line":44,"column":38},"end":{"line":44,"column":39}},"loc":{"start":{"line":44,"column":48},"end":{"line":51,"column":9}},"line":44},"4":{"name":"(anonymous_4)","decl":{"start":{"line":46,"column":21},"end":{"line":46,"column":22}},"loc":{"start":{"line":46,"column":35},"end":{"line":50,"column":13}},"line":46},"5":{"name":"(anonymous_5)","decl":{"start":{"line":52,"column":77},"end":{"line":52,"column":78}},"loc":{"start":{"line":52,"column":87},"end":{"line":63,"column":9}},"line":52},"6":{"name":"(anonymous_6)","decl":{"start":{"line":55,"column":21},"end":{"line":55,"column":22}},"loc":{"start":{"line":55,"column":35},"end":{"line":62,"column":13}},"line":55},"7":{"name":"(anonymous_7)","decl":{"start":{"line":64,"column":74},"end":{"line":64,"column":75}},"loc":{"start":{"line":64,"column":84},"end":{"line":75,"column":9}},"line":64},"8":{"name":"(anonymous_8)","decl":{"start":{"line":67,"column":21},"end":{"line":67,"column":22}},"loc":{"start":{"line":67,"column":35},"end":{"line":74,"column":13}},"line":67}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\spec\\purchase.spec.ts","sources":["D:\\mspr_ci\\spec\\purchase.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import supertest from 'supertest';\r\nimport { Response, SuperTest, Test } from 'supertest';\r\nimport {pErr} from '@shared';\r\nimport {NOT_FOUND, OK} from 'http-status-codes';\r\nimport app from '../src/app';\r\nimport {v4String} from 'uuid/interfaces';\r\nimport {IPurchase} from '@entities';\r\nimport {PurchaseService} from '../src/services/purchase.service';\r\nimport {PurchaseDao} from '@daos';\r\nconst baseUrl = '/purchases/';\r\n\r\ndescribe('Purchases Routes', () => {\r\n\r\n    let agent: SuperTest<Test>;\r\n\r\n    beforeAll((done) => {\r\n        agent = supertest.agent(app);\r\n        done();\r\n    });\r\n\r\n    const purchases = [\r\n        {\r\n            userId: 'c498e2aa-1c42-4827-80be-9fc6edeeaee3' as unknown as v4String,\r\n            user: {},\r\n            productId: 'c498e2aa-1c42-4827-80be-9fc6edeeaee8' as unknown as v4String,\r\n            product: {},\r\n        } as IPurchase,\r\n        {\r\n            userId: '62c0eab7-78ea-45f9-b552-0a83209ff02c' as unknown as v4String,\r\n            user: {},\r\n            productId: 'c498e2aa-1c42-4827-80be-9fc6edeeaee8' as unknown as v4String,\r\n            product: {},\r\n        } as IPurchase,\r\n        {\r\n            userId: '98538928-ebd0-441e-9720-81e31ef81a3a' as unknown as v4String,\r\n            user: {},\r\n            productId: 'c498e2aa-1c42-4827-80be-9fc6edeeaee8' as unknown as v4String,\r\n            product: {},\r\n        } as IPurchase,\r\n        {\r\n            userId: 'e9637ce2-c4ed-43c0-b971-73b998663b23' as unknown as v4String,\r\n            user: {},\r\n            productId: 'c498e2aa-1c42-4827-80be-9fc6edeeaee8' as unknown as v4String,\r\n            product: {},\r\n        } as IPurchase,\r\n    ];\r\n\r\n    describe('GET /user/{id}', () => {\r\n        it('returns status code 404', (done) => {\r\n            agent.get(baseUrl + 'c498e2aa-1c42-4827-80be-9fc6edeeaee5')\r\n                .end((err: Error, res: Response) => {\r\n                    pErr(err);\r\n                    expect(res.status).toBe(NOT_FOUND);\r\n                    done();\r\n                });\r\n        });\r\n\r\n        it('controller should return a JSON object with the requested user', (done) => {\r\n            spyOn(PurchaseService.prototype, 'getByUserId').and.returnValue(Promise.resolve(purchases));\r\n            agent.get(baseUrl + 'user/c498e2aa-1c42-4827-80be-9fc6edeeaee3')\r\n                .end((err: Error, res: Response) => {\r\n                    pErr(err);\r\n                    expect(res.status).toBe(OK);\r\n                    const retPurchases = res.body.purchases;\r\n                    expect(retPurchases).toEqual(purchases);\r\n                    expect(res.body.error).toBeUndefined();\r\n                    done();\r\n                });\r\n        });\r\n\r\n        it('service should return a JSON object with the requested user', (done) => {\r\n            spyOn(PurchaseDao.prototype, 'getByUserId').and.returnValue(Promise.resolve(purchases));\r\n            agent.get(baseUrl + 'user/c498e2aa-1c42-4827-80be-9fc6edeeaee3')\r\n                .end((err: Error, res: Response) => {\r\n                    pErr(err);\r\n                    expect(res.status).toBe(OK);\r\n                    const retPurchases = res.body.purchases;\r\n                    expect(retPurchases).toEqual(purchases);\r\n                    expect(res.body.error).toBeUndefined();\r\n                    done();\r\n                });\r\n        });\r\n    });\r\n});\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c19878d250a919b6ade7da769867065242a2fe2e"},"D:\\mspr_ci\\spec\\services\\company.service.spec.ts":{"path":"D:\\mspr_ci\\spec\\services\\company.service.spec.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":23},"end":{"line":3,"column":63}},"2":{"start":{"line":4,"column":0},"end":{"line":13,"column":3}},"3":{"start":{"line":5,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":6,"column":26},"end":{"line":6,"column":58}},"5":{"start":{"line":7,"column":8},"end":{"line":7,"column":52}},"6":{"start":{"line":8,"column":8},"end":{"line":8,"column":52}},"7":{"start":{"line":10,"column":4},"end":{"line":12,"column":7}},"8":{"start":{"line":11,"column":8},"end":{"line":11,"column":64}},"9":{"start":{"line":11,"column":21},"end":{"line":11,"column":52}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":34},"end":{"line":4,"column":35}},"loc":{"start":{"line":4,"column":40},"end":{"line":13,"column":1}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":5,"column":83},"end":{"line":5,"column":84}},"loc":{"start":{"line":5,"column":89},"end":{"line":9,"column":5}},"line":5},"2":{"name":"(anonymous_2)","decl":{"start":{"line":10,"column":57},"end":{"line":10,"column":58}},"loc":{"start":{"line":10,"column":63},"end":{"line":12,"column":5}},"line":10},"3":{"name":"(anonymous_3)","decl":{"start":{"line":11,"column":15},"end":{"line":11,"column":16}},"loc":{"start":{"line":11,"column":21},"end":{"line":11,"column":52}},"line":11}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{"0":1,"1":1,"2":1,"3":1},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\spec\\services\\company.service.spec.ts","sources":["D:\\mspr_ci\\spec\\services\\company.service.spec.ts"],"names":[],"mappings":";;AAAA,gEAA2D;AAE3D,QAAQ,CAAC,uBAAuB,EAAE,GAAG,EAAE;IACpC,EAAE,CAAC,0EAA0E,EAAE,GAAG,EAAE;QAChF,MAAM,SAAS,GAAG,2BAAY,CAAC,GAAG,CAAC,CAAC;QACpC,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAC5C,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC/C,CAAC,CAAC,CAAC;IAEJ,EAAE,CAAC,gDAAgD,EAAE,GAAG,EAAE;QACtD,MAAM,CAAC,GAAG,EAAE,CAAC,2BAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC;IAC7C,CAAC,CAAC,CAAC;AACN,CAAC,CAAC,CAAC","sourcesContent":["import {calculateTax} from '../../src/shared/CalculateTax';\r\n\r\ndescribe('company total revenue', () => {\r\n   it('should return the correct object of ITotalRevenue with correct parameter', () => {\r\n       const objectTax = calculateTax(100);\r\n       expect(objectTax.includingTax).toEqual(120);\r\n       expect(objectTax.excludingTax).toEqual(100);\r\n    });\r\n\r\n   it('should throw an Error because of bad parameter', () => {\r\n       expect(() => calculateTax(-1)).toThrow();\r\n   });\r\n});\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a636c94f1285b8a359b17798bf4bedf22530d1ed"},"D:\\mspr_ci\\spec\\user.spec.ts":{"path":"D:\\mspr_ci\\spec\\user.spec.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":14},"end":{"line":4,"column":60}},"3":{"start":{"line":5,"column":20},"end":{"line":5,"column":65}},"4":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"5":{"start":{"line":7,"column":28},"end":{"line":7,"column":56}},"6":{"start":{"line":8,"column":23},"end":{"line":8,"column":62}},"7":{"start":{"line":9,"column":16},"end":{"line":9,"column":32}},"8":{"start":{"line":10,"column":16},"end":{"line":10,"column":25}},"9":{"start":{"line":11,"column":0},"end":{"line":114,"column":3}},"10":{"start":{"line":13,"column":4},"end":{"line":16,"column":7}},"11":{"start":{"line":14,"column":8},"end":{"line":14,"column":57}},"12":{"start":{"line":15,"column":8},"end":{"line":15,"column":15}},"13":{"start":{"line":17,"column":17},"end":{"line":22,"column":5}},"14":{"start":{"line":23,"column":18},"end":{"line":48,"column":5}},"15":{"start":{"line":49,"column":4},"end":{"line":80,"column":7}},"16":{"start":{"line":50,"column":8},"end":{"line":57,"column":11}},"17":{"start":{"line":51,"column":12},"end":{"line":56,"column":15}},"18":{"start":{"line":53,"column":16},"end":{"line":53,"column":36}},"19":{"start":{"line":54,"column":16},"end":{"line":54,"column":64}},"20":{"start":{"line":55,"column":16},"end":{"line":55,"column":23}},"21":{"start":{"line":58,"column":8},"end":{"line":68,"column":11}},"22":{"start":{"line":59,"column":12},"end":{"line":59,"column":106}},"23":{"start":{"line":60,"column":12},"end":{"line":67,"column":15}},"24":{"start":{"line":62,"column":16},"end":{"line":62,"column":36}},"25":{"start":{"line":63,"column":33},"end":{"line":63,"column":47}},"26":{"start":{"line":64,"column":16},"end":{"line":64,"column":48}},"27":{"start":{"line":65,"column":16},"end":{"line":65,"column":55}},"28":{"start":{"line":66,"column":16},"end":{"line":66,"column":23}},"29":{"start":{"line":69,"column":8},"end":{"line":79,"column":11}},"30":{"start":{"line":70,"column":12},"end":{"line":70,"column":95}},"31":{"start":{"line":71,"column":12},"end":{"line":78,"column":15}},"32":{"start":{"line":73,"column":16},"end":{"line":73,"column":36}},"33":{"start":{"line":74,"column":33},"end":{"line":74,"column":47}},"34":{"start":{"line":75,"column":16},"end":{"line":75,"column":48}},"35":{"start":{"line":76,"column":16},"end":{"line":76,"column":55}},"36":{"start":{"line":77,"column":16},"end":{"line":77,"column":23}},"37":{"start":{"line":81,"column":4},"end":{"line":113,"column":7}},"38":{"start":{"line":82,"column":8},"end":{"line":90,"column":11}},"39":{"start":{"line":83,"column":12},"end":{"line":89,"column":15}},"40":{"start":{"line":85,"column":16},"end":{"line":85,"column":36}},"41":{"start":{"line":86,"column":16},"end":{"line":86,"column":71}},"42":{"start":{"line":87,"column":16},"end":{"line":87,"column":53}},"43":{"start":{"line":88,"column":16},"end":{"line":88,"column":23}},"44":{"start":{"line":91,"column":8},"end":{"line":101,"column":11}},"45":{"start":{"line":92,"column":12},"end":{"line":92,"column":106}},"46":{"start":{"line":93,"column":12},"end":{"line":100,"column":15}},"47":{"start":{"line":95,"column":16},"end":{"line":95,"column":36}},"48":{"start":{"line":96,"column":33},"end":{"line":96,"column":41}},"49":{"start":{"line":97,"column":16},"end":{"line":97,"column":47}},"50":{"start":{"line":98,"column":16},"end":{"line":98,"column":55}},"51":{"start":{"line":99,"column":16},"end":{"line":99,"column":23}},"52":{"start":{"line":102,"column":8},"end":{"line":112,"column":11}},"53":{"start":{"line":103,"column":12},"end":{"line":103,"column":95}},"54":{"start":{"line":104,"column":12},"end":{"line":111,"column":15}},"55":{"start":{"line":106,"column":16},"end":{"line":106,"column":36}},"56":{"start":{"line":107,"column":33},"end":{"line":107,"column":41}},"57":{"start":{"line":108,"column":16},"end":{"line":108,"column":47}},"58":{"start":{"line":109,"column":16},"end":{"line":109,"column":55}},"59":{"start":{"line":110,"column":16},"end":{"line":110,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":11,"column":25},"end":{"line":11,"column":26}},"loc":{"start":{"line":11,"column":31},"end":{"line":114,"column":1}},"line":11},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":14},"end":{"line":13,"column":15}},"loc":{"start":{"line":13,"column":24},"end":{"line":16,"column":5}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":49,"column":22},"end":{"line":49,"column":23}},"loc":{"start":{"line":49,"column":28},"end":{"line":80,"column":5}},"line":49},"3":{"name":"(anonymous_3)","decl":{"start":{"line":50,"column":38},"end":{"line":50,"column":39}},"loc":{"start":{"line":50,"column":48},"end":{"line":57,"column":9}},"line":50},"4":{"name":"(anonymous_4)","decl":{"start":{"line":52,"column":21},"end":{"line":52,"column":22}},"loc":{"start":{"line":52,"column":35},"end":{"line":56,"column":13}},"line":52},"5":{"name":"(anonymous_5)","decl":{"start":{"line":58,"column":72},"end":{"line":58,"column":73}},"loc":{"start":{"line":58,"column":82},"end":{"line":68,"column":9}},"line":58},"6":{"name":"(anonymous_6)","decl":{"start":{"line":61,"column":21},"end":{"line":61,"column":22}},"loc":{"start":{"line":61,"column":35},"end":{"line":67,"column":13}},"line":61},"7":{"name":"(anonymous_7)","decl":{"start":{"line":69,"column":69},"end":{"line":69,"column":70}},"loc":{"start":{"line":69,"column":79},"end":{"line":79,"column":9}},"line":69},"8":{"name":"(anonymous_8)","decl":{"start":{"line":72,"column":21},"end":{"line":72,"column":22}},"loc":{"start":{"line":72,"column":35},"end":{"line":78,"column":13}},"line":72},"9":{"name":"(anonymous_9)","decl":{"start":{"line":81,"column":26},"end":{"line":81,"column":27}},"loc":{"start":{"line":81,"column":32},"end":{"line":113,"column":5}},"line":81},"10":{"name":"(anonymous_10)","decl":{"start":{"line":82,"column":38},"end":{"line":82,"column":39}},"loc":{"start":{"line":82,"column":48},"end":{"line":90,"column":9}},"line":82},"11":{"name":"(anonymous_11)","decl":{"start":{"line":84,"column":21},"end":{"line":84,"column":22}},"loc":{"start":{"line":84,"column":35},"end":{"line":89,"column":13}},"line":84},"12":{"name":"(anonymous_12)","decl":{"start":{"line":91,"column":77},"end":{"line":91,"column":78}},"loc":{"start":{"line":91,"column":87},"end":{"line":101,"column":9}},"line":91},"13":{"name":"(anonymous_13)","decl":{"start":{"line":94,"column":21},"end":{"line":94,"column":22}},"loc":{"start":{"line":94,"column":35},"end":{"line":100,"column":13}},"line":94},"14":{"name":"(anonymous_14)","decl":{"start":{"line":102,"column":74},"end":{"line":102,"column":75}},"loc":{"start":{"line":102,"column":84},"end":{"line":112,"column":9}},"line":102},"15":{"name":"(anonymous_15)","decl":{"start":{"line":105,"column":21},"end":{"line":105,"column":22}},"loc":{"start":{"line":105,"column":35},"end":{"line":111,"column":13}},"line":105}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1},"b":{},"inputSourceMap":{"version":3,"file":"D:\\mspr_ci\\spec\\user.spec.ts","sources":["D:\\mspr_ci\\spec\\user.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import app from '../src/app';\r\nimport supertest from 'supertest';\r\n\r\nimport { Response, SuperTest, Test } from 'supertest';\r\nimport {pErr} from '@shared';\r\nimport {NOT_FOUND, OK} from 'http-status-codes';\r\nimport {UserService} from '../src/services/user.service';\r\nimport {IUser} from '@entities';\r\nimport {v4String} from 'uuid/interfaces';\r\nimport {UserDao} from '@daos';\r\nconst baseUrl = '/users/';\r\n\r\ndescribe('Users Routes', () => {\r\n\r\n    let agent: SuperTest<Test>;\r\n\r\n    beforeAll((done) => {\r\n        agent = supertest.agent(app);\r\n        done();\r\n    });\r\n\r\n    const user = {\r\n        id: 'c498e2aa-1c42-4827-80be-9fc6edeeaee3' as unknown as v4String,\r\n        firstName: 'Ronan',\r\n        lastName: 'Laplaud',\r\n        purchases: [],\r\n    } as IUser;\r\n\r\n    const users = [\r\n        {\r\n            id: 'c498e2aa-1c42-4827-80be-9fc6edeeaee3' as unknown as v4String,\r\n            firstName: 'Ronan',\r\n            lastName: 'Laplaud',\r\n            purchases: [],\r\n        } as IUser,\r\n        {\r\n            id: '62c0eab7-78ea-45f9-b552-0a83209ff02c' as unknown as v4String,\r\n            firstName: 'Louka',\r\n            lastName: 'Houlgatte',\r\n            purchases: [],\r\n        } as IUser,\r\n        {\r\n            id: '98538928-ebd0-441e-9720-81e31ef81a3a' as unknown as v4String,\r\n            firstName: 'Rémi',\r\n            lastName: 'Castel',\r\n            purchases: [],\r\n        } as IUser,\r\n        {\r\n            id: 'e9637ce2-c4ed-43c0-b971-73b998663b23' as unknown as v4String,\r\n            firstName: 'Alexis',\r\n            lastName: 'Leroy',\r\n            purchases: [],\r\n        } as IUser,\r\n    ];\r\n\r\n    describe('GET /', () => {\r\n        it('returns status code 200', (done) => {\r\n            agent.get(baseUrl)\r\n                .end((err: Error, res: Response) => {\r\n                    pErr(err);\r\n                    expect(res.status).toBe(OK);\r\n                    done();\r\n                });\r\n        });\r\n\r\n        it('controller should return a JSON object with all the users', (done) => {\r\n            spyOn(UserService.prototype, 'getAll').and.returnValue(Promise.resolve(users));\r\n            agent.get(baseUrl)\r\n                .end((err: Error, res: Response) => {\r\n                    pErr(err);\r\n                    const retUsers = res.body.users;\r\n                    expect(retUsers).toEqual(users);\r\n                    expect(res.body.error).toBeUndefined();\r\n                    done();\r\n                });\r\n        });\r\n\r\n        it('service should return a JSON object with all the users', (done) => {\r\n            spyOn(UserDao.prototype, 'getAll').and.returnValue(Promise.resolve(users));\r\n            agent.get(baseUrl)\r\n                .end((err: Error, res: Response) => {\r\n                    pErr(err);\r\n                    const retUsers = res.body.users;\r\n                    expect(retUsers).toEqual(users);\r\n                    expect(res.body.error).toBeUndefined();\r\n                    done();\r\n                });\r\n        });\r\n    });\r\n\r\n    describe('GET /{id}', () => {\r\n        it('returns status code 404', (done) => {\r\n            agent.get(baseUrl + 'c498e2aa-1c42-4827-80be-9fc6edeeaee4')\r\n                .end((err: Error, res: Response) => {\r\n                    pErr(err);\r\n                    expect(res.status).toBe(NOT_FOUND);\r\n                    expect(res.body.error).toBeDefined();\r\n                    done();\r\n                });\r\n        });\r\n\r\n        it('controller should return a JSON object with the requested user', (done) => {\r\n            spyOn(UserService.prototype, 'getById').and.returnValue(Promise.resolve(user));\r\n            agent.get(baseUrl + 'c498e2aa-1c42-4827-80be-9fc6edeeaee3')\r\n                .end((err: Error, res: Response) => {\r\n                    pErr(err);\r\n                    const retUsers = res.body;\r\n                    expect(retUsers).toEqual(user);\r\n                    expect(res.body.error).toBeUndefined();\r\n                    done();\r\n                });\r\n        });\r\n\r\n        it('service should return a JSON object with the requested user', (done) => {\r\n            spyOn(UserDao.prototype, 'getById').and.returnValue(Promise.resolve(user));\r\n            agent.get(baseUrl + 'c498e2aa-1c42-4827-80be-9fc6edeeaee3')\r\n                .end((err: Error, res: Response) => {\r\n                    pErr(err);\r\n                    const retUsers = res.body;\r\n                    expect(retUsers).toEqual(user);\r\n                    expect(res.body.error).toBeUndefined();\r\n                    done();\r\n                });\r\n        });\r\n    });\r\n});\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"224b024be028e5d3b7c1bdcd408e426082d3c635"}}